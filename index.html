<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì ìˆ ê°€ The Moon - ì‚¬ì£¼ë¡œ ë³´ëŠ” ë‚˜ì˜ ì˜í˜¼ ìºë¦­í„° (MBTI)</title>
    <meta name="description"
        content="2026ë…„ ë³‘ì˜¤ë…„ ë¬´ë£Œ ì‹ ë…„ìš´ì„¸, ì‚¬ì£¼íŒ”ì, ë§Œì„¸ë ¥ ê¸°ë°˜ì˜ ì„±ê²© ë¶„ì„. ë‚˜ì˜ íƒ€ê³ ë‚œ ê¸°ì§ˆê³¼ MBTIë¥¼ ë¹„êµí•´ë³´ì„¸ìš”. ì˜¤ëŠ˜, ì´ë²ˆì£¼, ì˜¬í•´ì˜ ìš´ì„¸ë¥¼ ë¬´ë£Œë¡œ ì œê³µí•©ë‹ˆë‹¤.">
    <meta name="keywords" content="ì‚¬ì£¼, ë¬´ë£Œì‚¬ì£¼, ë§Œì„¸ë ¥, ì‹ ë…„ìš´ì„¸, 2026ë…„ìš´ì„¸, MBTI, ì„±ê²©í…ŒìŠ¤íŠ¸, ì‚¬ì£¼MBTI, ê¶í•©">
    <meta property="og:title" content="ì ìˆ ê°€ The Moon - ì‚¬ì£¼ë¡œ ë³´ëŠ” ì˜í˜¼ ìºë¦­í„°">
    <meta property="og:description" content="ì†Œë¦„ ë‹ëŠ” ì‚¬ì£¼ ë¶„ì„! ë‚´ ì˜í˜¼ì˜ MBTIëŠ” ë¬´ì—‡ì¼ê¹Œ? ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”.">
    <meta property="og:image" content="images/Fire.png">
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <style>
        :root {
            --bg: #0f172a;
            --glass: rgba(15, 23, 42, 0.88);
            --border: rgba(255, 255, 255, 0.1);
            --txt: #f0f4ff;
            --txt2: #94a3b8;
            --accent: #a855f7;
            --pink: #ff6b9d;
            --cyan: #00f5d4;
            --yellow: #ffd166
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--txt);
            min-height: 100vh;
            line-height: 1.75
        }

        #bgVideo {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center 20%;
            z-index: -3;
            opacity: 0.55;
            mix-blend-mode: screen
        }

        #overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.7);
            z-index: -2
        }

        #trailCanvas {
            position: fixed;
            inset: 0;
            z-index: 9999;
            pointer-events: none
        }

        .wrap {
            max-width: 480px;
            margin: 0 auto;
            padding: 24px 16px 50px
        }

        .card {
            background: var(--glass);
            backdrop-filter: blur(16px);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 22px 18px;
            margin-bottom: 14px
        }

        h1 {
            text-align: center;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--pink), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 6px
        }

        .sub {
            text-align: center;
            color: var(--txt2);
            font-size: .85rem;
            margin-bottom: 20px
        }

        .sec-title {
            font-size: .95rem;
            font-weight: 700;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 4px
        }

        .sec-title .nm {
            color: var(--cyan)
        }

        .sec-title .sub-t {
            font-size: .65rem;
            color: #9ca3af;
            font-weight: 400;
            margin-left: 8px
        }

        .fortune-sel {
            display: flex;
            gap: 6px;
            margin-bottom: 16px
        }

        .fortune-sel button {
            flex: 1;
            padding: 10px 6px;
            border: 2px solid var(--border);
            background: rgba(0, 0, 0, .3);
            color: var(--txt2);
            font-size: .75rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 10px;
            transition: .2s
        }

        .fortune-sel button.on {
            border-color: var(--cyan);
            color: var(--cyan);
            background: rgba(0, 245, 212, .1)
        }

        .gender-sel {
            display: flex;
            gap: 8px
        }

        .gender-sel button {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border);
            background: rgba(0, 0, 0, .3);
            color: var(--txt2);
            font-size: .85rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 10px;
            transition: .2s
        }

        .gender-sel button.on {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(168, 85, 247, .15)
        }

        .form-g {
            margin-bottom: 14px
        }

        .form-g label {
            display: block;
            font-size: .8rem;
            color: var(--txt2);
            margin-bottom: 6px
        }

        .form-g input,
        .form-g select {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, .4);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--txt);
            font-size: .95rem
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px
        }

        .tab-row {
            display: flex;
            background: rgba(0, 0, 0, .3);
            border-radius: 8px;
            padding: 3px;
            margin-bottom: 14px
        }

        .tab-row button {
            flex: 1;
            padding: 9px;
            border: none;
            background: 0;
            color: var(--txt2);
            font-size: .8rem;
            cursor: pointer;
            border-radius: 6px;
            transition: .2s
        }

        .tab-row button.on {
            background: var(--accent);
            color: #fff
        }

        .tab-c {
            display: none
        }

        .tab-c.on {
            display: block
        }

        .chk-row {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 8px
        }

        .chk-row input {
            width: 16px;
            height: 16px;
            accent-color: var(--accent)
        }

        .chk-row label {
            color: var(--txt2);
            font-size: .8rem
        }

        .submit {
            width: 100%;
            padding: 14px;
            margin-top: 8px;
            background: linear-gradient(135deg, var(--pink), var(--accent));
            border: none;
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer
        }

        #loading {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, .97);
            z-index: 999;
            flex-direction: column;
            justify-content: center;
            align-items: center
        }

        .ld {
            width: 44px;
            height: 44px;
            border: 3px solid rgba(0, 245, 212, .2);
            border-top-color: var(--cyan);
            border-radius: 50%;
            animation: sp 1s linear infinite
        }

        @keyframes sp {
            to {
                transform: rotate(360deg)
            }
        }

        #result {
            display: none
        }

        .hero {
            text-align: center;
            padding: 16px 0
        }

        .soul-c {
            font-size: 3.5rem;
            filter: drop-shadow(0 0 25px var(--yellow));
            margin: 8px 0
        }

        .soul-t {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--pink);
            margin-bottom: 8px
        }

        .mbti-badge {
            display: inline-block;
            padding: 6px 14px;
            background: linear-gradient(135deg, var(--cyan), var(--accent));
            border-radius: 20px;
            font-size: .8rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 12px
        }

        .theme-tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 16px
        }

        .theme-tabs button {
            flex: 1;
            padding: 10px 4px;
            border: 2px solid var(--border);
            background: rgba(0, 0, 0, .3);
            color: var(--txt2);
            font-size: .7rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 10px;
            transition: .2s
        }

        .theme-tabs button.on {
            border-color: var(--pink);
            color: var(--pink);
            background: rgba(255, 107, 157, .1)
        }

        .story {
            color: var(--txt);
            font-size: .92rem;
            line-height: 1.9
        }

        .advice-box {
            background: linear-gradient(135deg, rgba(255, 107, 157, .1), rgba(168, 85, 247, .1));
            border: 1px solid var(--pink);
            border-radius: 12px;
            padding: 16px;
            margin-top: 14px
        }

        .advice-t {
            color: var(--pink);
            font-weight: 700;
            margin-bottom: 8px;
            font-size: .9rem
        }

        .stat-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 8px
        }

        .stat-row img {
            width: 26px;
            height: 26px;
            object-fit: contain
        }

        .stat-track {
            flex: 1;
            height: 9px;
            background: rgba(0, 0, 0, .4);
            border-radius: 5px;
            overflow: hidden
        }

        .stat-fill {
            height: 100%;
            width: 0;
            border-radius: 5px;
            transition: width 1.2s
        }

        .stat-n {
            width: 22px;
            text-align: right;
            font-weight: 700;
            font-size: .85rem
        }

        .luck-box {
            display: flex;
            gap: 12px;
            padding: 14px;
            background: rgba(0, 0, 0, .3);
            border-radius: 10px
        }

        .luck-dot {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            flex-shrink: 0;
            box-shadow: 0 0 16px currentColor
        }

        .luck-info strong {
            display: block;
            color: var(--yellow);
            margin-bottom: 3px;
            font-size: .85rem
        }

        .luck-info span {
            color: var(--txt2);
            font-size: .8rem
        }

        .quest-box {
            background: linear-gradient(135deg, rgba(0, 245, 212, .1), rgba(96, 165, 250, .1));
            border: 1px solid var(--cyan);
            border-radius: 12px;
            padding: 14px;
            margin-top: 12px
        }

        .quest-t {
            color: var(--cyan);
            font-weight: 700;
            margin-bottom: 6px;
            font-size: .85rem
        }

        .btn-row {
            display: flex;
            gap: 10px;
            margin-top: 10px
        }

        .reset {
            flex: 1;
            padding: 12px;
            background: rgba(0, 0, 0, .4);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--txt2);
            font-size: .9rem;
            cursor: pointer
        }

        .kakao-btn {
            flex: 1;
            padding: 12px;
            background: #FEE500;
            border: none;
            border-radius: 10px;
            color: #3C1E1E;
            font-size: .9rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px
        }

        .ad {
            margin-top: 18px;
            padding: 24px;
            background: rgba(0, 0, 0, .2);
            border: 1px dashed var(--border);
            border-radius: 10px;
            text-align: center;
            color: var(--txt2);
            font-size: .75rem
        }

        .encyclopedia {
            margin-top: 40px
        }

        .encyclopedia h2 {
            font-size: 1.2rem;
            color: var(--cyan);
            margin-bottom: 20px;
            text-align: center
        }

        .enc-card {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 18px;
            margin-bottom: 12px
        }

        .enc-card h3 {
            color: var(--pink);
            font-size: 1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px
        }

        .enc-card h3 span {
            font-size: 1.5rem
        }

        .enc-card p {
            color: var(--txt2);
            font-size: .85rem;
            line-height: 1.8
        }

        .pillars {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 16px 0
        }

        .pillar {
            text-align: center;
            min-width: 60px
        }

        .pillar-label {
            font-size: .7rem;
            color: var(--txt2);
            margin-bottom: 6px;
            display: block
        }

        .stem,
        .branch {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            font-weight: 700;
            border-radius: 8px;
            margin: 0 auto 4px
        }

        .saju-msg {
            text-align: center;
            color: var(--cyan);
            font-size: .85rem;
            margin-top: 12px;
            padding: 10px;
            background: rgba(0, 245, 212, .1);
            border-radius: 8px
        }

        .chemistry-content {
            display: flex;
            flex-direction: column;
            gap: 12px
        }

        .chemistry-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            border-radius: 12px
        }

        .chemistry-item.best {
            background: linear-gradient(135deg, rgba(0, 245, 212, .15), rgba(96, 165, 250, .15));
            border: 1px solid var(--cyan)
        }

        .chemistry-item.worst {
            background: linear-gradient(135deg, rgba(239, 68, 68, .15), rgba(168, 85, 247, .15));
            border: 1px solid var(--pink)
        }

        .chemistry-item .emoji {
            font-size: 1.8rem
        }

        .chemistry-info strong {
            display: block;
            font-size: .85rem;
            margin-bottom: 4px
        }

        .chemistry-item.best strong {
            color: var(--cyan)
        }

        .chemistry-item.worst strong {
            color: var(--pink)
        }

        .chemistry-info p {
            color: var(--txt2);
            font-size: .8rem;
            margin: 0
        }

        /* MBTI Test Modal */
        #mbtiModal {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 9999;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }

        .mbti-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .mbti-close-btn {
            position: absolute;
            top: 0;
            right: 0;
            background: none;
            border: none;
            color: var(--txt2);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 4px 8px;
        }

        .mbti-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
        }

        .mbti-bar {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s ease;
        }

        .q-card {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .q-text {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 30px;
            line-height: 1.5;
            color: #fff;
        }

        .opt-btn {
            width: 100%;
            padding: 16px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--txt);
            font-size: 1rem;
            cursor: pointer;
            transition: 0.2s;
            text-align: left;
        }

        .opt-btn:hover,
        .opt-btn:active {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--accent);
        }

        /* Action Buttons Layout */
        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .submit {
            flex: 1;
            margin-top: 0;
            /* Let flex container handle spacing */
        }

        .mbti-start-btn {
            flex: 1;
            padding: 14px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--accent);
            color: var(--accent);
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-size: 0.9rem;
        }

        /* MBTI Result Modal */
        #mbtiResultModal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.95);
            z-index: 10000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
        }

        .mbti-res-card {
            background: var(--glass);
            border: 1px solid var(--accent);
            border-radius: 20px;
            padding: 24px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.2);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .res-badge {
            display: inline-block;
            background: var(--accent);
            color: #fff;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .res-title {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--cyan), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
        }

        .res-desc {
            color: var(--txt);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: left;
            background: rgba(0, 0, 0, 0.2);
            padding: 14px;
            border-radius: 12px;
        }

        .res-compare {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px dashed var(--border);
            font-size: 0.9rem;
            color: var(--txt2);
        }

        /* MBTI Mini Popup */
        .mini-popup {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid var(--cyan);
            border-radius: 16px;
            padding: 16px 20px;
            box-shadow: 0 -5px 20px rgba(0, 245, 212, 0.3);
            z-index: 990;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: bottom 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 90%;
            max-width: 360px;
        }

        .mini-popup.show {
            bottom: 20px;
        }

        .mini-btn {
            background: var(--cyan);
            color: #0f172a;
            border: none;
            padding: 8px 14px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            white-space: nowrap;
        }

        .mini-close {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--txt2);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <video id="bgVideo" autoplay loop muted playsinline>
        <source src="images/bg_video.mp4" type="video/mp4">
    </video>
    <div id="overlay"></div>
    <canvas id="trailCanvas"></canvas>

    <!-- MBTI Test Modal -->
    <div id="mbtiModal">
        <div class="wrap" style="height: 100%; display: flex; flex-direction: column; justify-content: center;">
            <div class="mbti-header">
                <h2>ğŸ§© ì„±ê²© ìœ í˜• í…ŒìŠ¤íŠ¸</h2>
                <button class="mbti-close-btn" onclick="closeMbtiTest()">âœ•</button>
                <div class="mbti-progress">
                    <div class="mbti-bar" id="mbtiBar"></div>
                </div>
                <p id="qNum" style="color:var(--txt2); font-size:0.8rem; margin-top:8px">1 / 12</p>
            </div>
            <div id="qBox"></div>
        </div>
    </div>

    <!-- MBTI Result Modal -->
    <div id="mbtiResultModal">
        <div class="mbti-res-card">
            <div class="res-badge">ë‹¹ì‹ ì˜ ì§„ì§œ ì„±ê²©ì€?</div>
            <div class="res-title" id="resMbtiTitle">INFP</div>
            <div class="res-desc" id="resMbtiDesc"></div>
            <div class="res-compare" id="resCompareTxt"></div>
            <button class="submit" onclick="closeMbtiResult()">í™•ì¸</button>
        </div>
    </div>

    <div class="wrap">
        <div id="inputSection" class="card">
            <h1>ğŸŒ™ ì ìˆ ê°€ The Moon</h1>
            <p class="sub">MZì„¸ëŒ€ë¥¼ ìœ„í•œ íŒ©í­ ì‚¬ì£¼ ğŸ”¥</p>
            <div class="form-g"><label>ğŸ“› ì´ë¦„/ë‹‰ë„¤ì„</label><input type="text" id="userName" placeholder="ex) ëŸ­í‚¤ë¯¼ìˆ˜"
                    maxlength="20"></div>
            <div class="form-g"><label>ğŸ‘¤ ì„±ë³„</label>
                <div class="gender-sel"><button class="on" data-g="M">ğŸ™‹â€â™‚ï¸ ë‚¨ì</button><button data-g="F">ğŸ™‹â€â™€ï¸
                        ì—¬ì</button></div>
            </div>
            <div class="fortune-sel"><button class="on" data-t="today">âš¡ì˜¤ëŠ˜</button><button
                    data-t="week">ğŸ“…ì´ë²ˆì£¼</button><button data-t="year">ğŸš€1ë…„</button></div>
            <div class="tab-row"><button class="on" data-tab="quick">âš¡ë¹ ë¥¸ì…ë ¥</button><button
                    data-tab="detail">ğŸ“…ì„ íƒ</button></div>
            <div id="tab-quick" class="tab-c on">
                <div class="form-g"><label>ğŸ‚ ìƒë…„ì›”ì¼ 8ìë¦¬</label><input type="text" id="quickDate" placeholder="19990101"
                        maxlength="8" inputmode="numeric"></div>
            </div>
            <div id="tab-detail" class="tab-c">
                <div class="form-g"><label>ğŸ‚ ìƒë…„ì›”ì¼</label>
                    <div class="grid-3"><select id="selYear"></select><select id="selMonth"></select><select
                            id="selDay"></select></div>
                </div>
            </div>
            <div class="form-g"><label>â° íƒœì–´ë‚œ ì‹œê°„</label>
                <div class="grid-3" id="timeInputs"><select id="selAmpm">
                        <option value="AM">ì˜¤ì „</option>
                        <option value="PM">ì˜¤í›„</option>
                    </select><select id="selHour"></select><select id="selMinute"></select></div>
                <div class="chk-row"><input type="checkbox" id="unknownTime"><label for="unknownTime">ì‹œê°„ ëª¨ë¦„</label>
                </div>
            </div>
            <div class="action-buttons">
                <button class="submit" onclick="analyze()">ğŸ”® ë‚´ ìš´ëª… ê¹Œë°œë¦¬ê¸°</button>
                <button class="mbti-start-btn" onclick="startMbtiTest()">ğŸ§© ë‚´ 'ì§„ì§œ' MBTI ê²€ì‚¬í•˜ê¸°</button>
            </div>
        </div>
        <div id="loading">
            <div class="ld"></div>
            <p style="margin-top:14px;color:var(--cyan)">ì²œê¸°ëˆ„ì„¤ ì¤‘... ğŸ¤«</p>
        </div>
        <div id="result">
            <div class="card" id="manseCard">
                <div class="sec-title" style="justify-content:center">ğŸ“œ <span class="nm" id="n0">OOO</span>ë‹˜ì˜ ì‚¬ì£¼ íŒ”ì
                </div>
                <div class="pillars" id="pillarsBox"></div>
                <div class="saju-msg" id="sajuMsg"></div>
            </div>
            <div class="card hero">
                <div class="sec-title" style="justify-content:center">âœ¨ <span class="nm" id="n1">OOO</span>ë‹˜ì˜ ì˜í˜¼ ìºë¦­í„°
                </div>
                <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 10px;">
                    <div
                        style="flex:1; background:rgba(0,0,0,0.3); padding:20px; border-radius:16px; text-align:center;">
                        <span style="font-size:0.9rem; color:var(--txt2); display:block; margin-bottom:8px;">íƒ€ê³ ë‚œ ìš´ëª…
                            (ì‚¬ì£¼)</span>
                        <div id="sajuMbti"
                            style="font-size:2.5rem; font-weight:800; color:var(--pink); line-height:1.2;"></div>
                    </div>
                </div>

                <div id="soulC" class="soul-c"></div>
                <div id="soulT" class="soul-t"></div>
                <div id="genderBadge" style="font-size:.8rem;color:var(--txt2);margin-top:4px"></div>
            </div>
            <div class="card">
                <div class="theme-tabs"><button class="on" data-th="base">ğŸ  ê¸°ë³¸</button><button data-th="love">ğŸ’˜
                        ì—°ì• </button><button data-th="money">ğŸ’° ì¬ë¬¼</button><button data-th="work">âš”ï¸ ì‚¬íšŒ</button></div>
                <div id="storyBox" class="story"></div>
                <div class="advice-box">
                    <div class="advice-t">ğŸ’€ íŒ©í­ ì¡°ì–¸</div>
                    <p id="adviceTxt"></p>
                </div>
            </div>
            <div class="card">
                <div class="sec-title">ğŸ§¬ <span class="nm" id="n2">OOO</span>ë‹˜ì˜ ì˜í˜¼ ì„±ë¶„í‘œ <span class="sub-t">| ì˜¤í–‰ì˜
                        ê¸°ìš´</span></div>
                <div id="statChart"></div>
            </div>
            <div class="card">
                <div class="sec-title">ğŸ€ <span class="nm" id="n3">OOO</span>ë‹˜ì˜ ì¹˜íŠ¸í‚¤</div>
                <div id="luckBox" class="luck-box"></div>
                <div class="quest-box">
                    <div class="quest-t">ğŸ¯ ì˜¤ëŠ˜ì˜ í€˜ìŠ¤íŠ¸</div>
                    <p id="questTxt"></p>
                </div>
            </div>
            <div class="card" id="chemistryCard">
                <div class="sec-title" style="justify-content:center">ğŸ’« ì˜í˜¼ì˜ ë‹¨ì§ & í”¼í•´ì•¼ í•  ì•…ì—°</div>
                <div class="chemistry-content">
                    <div class="chemistry-item best">
                        <span class="emoji">âœ¨</span>
                        <div class="chemistry-info">
                            <strong>ë‹¹ì‹ ì—ê²Œ í˜ì´ ë˜ì–´ì£¼ëŠ” ê·€ì¸</strong>
                            <p id="bestMatch"></p>
                        </div>
                    </div>
                    <div class="chemistry-item worst">
                        <span class="emoji">âš¡</span>
                        <div class="chemistry-info">
                            <strong>ë§Œë‚˜ë©´ ê¸° ë¹¨ë¦¬ëŠ” ìŠ¤íƒ€ì¼</strong>
                            <p id="worstMatch"></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="btn-row"><button class="reset" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œí•˜ê¸°</button><button
                    class="kakao-btn" onclick="shareKakao()">ğŸ’¬ ìë‘í•˜ê¸°</button></div>
            <div class="ad">ê´‘ê³  ì˜ì—­</div>
        </div>
        <section class="encyclopedia">
            <h2>ğŸ“š ì²œê°„ ì„±ê²© ë„ê°</h2>
            <article class="enc-card">
                <h3><span>ç”²</span> ê°‘ëª© - í° ë‚˜ë¬´ì˜ ê¸°ìš´</h3>
                <p>ê°‘ëª©(ç”²æœ¨)ì€ í•˜ëŠ˜ì„ í–¥í•´ ê³§ê²Œ ë»—ì–´ ì˜¬ë¼ê°€ëŠ” ê±°ëŒ€í•œ ë‚˜ë¬´ì˜ ê¸°ìš´ì„ ìƒì§•í•©ë‹ˆë‹¤. ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ ë¦¬ë”ì‹­ì´ ê°•í•˜ê³  ì •ì˜ê°ì´ ë„˜ì¹˜ë©°, ìì‹ ë§Œì˜ ì›ì¹™ê³¼ ì†Œì‹ ì„ ëê¹Œì§€ ì§€í‚¤ë ¤ëŠ”
                    ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤. ë§ˆì¹˜ ë°± ë…„ ëœ ê±°ëª©ì²˜ëŸ¼ í”ë“¤ë¦¬ì§€ ì•ŠëŠ” ëšì‹¬ê³¼ ê³ ì§‘ì´ íŠ¹ì§•ì´ì£ . í•˜ì§€ë§Œ ì´ëŸ¬í•œ ê°•ì§í•¨ì´ ë•Œë¡œëŠ” ìœµí†µì„± ë¶€ì¡±ìœ¼ë¡œ ë¹„ì¶°ì§ˆ ìˆ˜ ìˆìœ¼ë©°, íƒ€ì¸ì˜ ì˜ê²¬ì„ ìˆ˜ìš©í•˜ëŠ” ë°
                    ì–´ë ¤ì›€ì„ ê²ªê¸°ë„ í•©ë‹ˆë‹¤. ê°‘ëª©ì¸ì€ ìƒˆë¡œìš´ ê²ƒì„ ì‹œì‘í•˜ëŠ” ê°œì²™ì ì •ì‹ ì´ ìˆì–´ ì‚¬ì—…ì´ë‚˜ í”„ë¡œì íŠ¸ì˜ ì„ ë‘ì— ì„œëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>ä¹™</span> ì„ëª© - ë©êµ´ê³¼ í’€ì˜ ê¸°ìš´</h3>
                <p>ì„ëª©(ä¹™æœ¨)ì€ ë°”ìœ„í‹ˆì—ì„œë„ ìë¼ë‚˜ëŠ” ì‘ì€ í’€ê³¼ ë©êµ´ì˜ ìƒëª…ë ¥ì„ ìƒì§•í•©ë‹ˆë‹¤. ê°‘ëª©ì´ í° ë‚˜ë¬´ë¼ë©´ ì„ëª©ì€ ìœ ì—°í•˜ê²Œ íœ˜ì–´ì§€ëŠ” ì”ë””ë‚˜ ë©êµ´ì²˜ëŸ¼ ë¶€ë“œëŸ½ê³  ì ì‘ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ê²‰ë³´ê¸°ì—” ì—°ì•½í•´
                    ë³´ì´ì§€ë§Œ ì–´ë–¤ í™˜ê²½ì—ì„œë„ ì‚´ì•„ë‚¨ëŠ” ê°•ì¸í•œ ìƒì¡´ë ¥ì„ ì§€ë…”ì£ . ì„ëª©ì¸ì€ ëˆˆì¹˜ê°€ ë¹ ë¥´ê³  í˜‘ë ¥ì ì´ë©°, ì£¼ë³€ ìƒí™©ì„ ì˜ íŒŒì•…í•´ ìµœì ì˜ ìœ„ì¹˜ë¥¼ ì°¾ì•„ê°‘ë‹ˆë‹¤. ë‹¤ë§Œ ì§€ë‚˜ì¹œ ëˆˆì¹˜ ë³´ê¸°ë‚˜
                    ìš°ìœ ë¶€ë‹¨í•¨ìœ¼ë¡œ í˜ë“¤ì–´í•  ë•Œë„ ìˆìŠµë‹ˆë‹¤. ëŒ€ì¸ê´€ê³„ì—ì„œ ì¡°í™”ë¥¼ ì¤‘ì‹œí•˜ë©° ê°ˆë“±ì„ í”¼í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>ä¸™</span> ë³‘í™” - íƒœì–‘ì˜ ê¸°ìš´</h3>
                <p>ë³‘í™”(ä¸™ç«)ëŠ” ì´ ì„¸ìƒ ëª¨ë“  ê²ƒì„ í™˜í•˜ê²Œ ë¹„ì¶”ëŠ” íƒœì–‘ì˜ ì—ë„ˆì§€ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ ì–´ë””ì„œë“  ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—­í• ì„ í•˜ë©°, ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ë¥¼ ì£¼ë³€ì— í¼ëœ¨ë¦½ë‹ˆë‹¤.
                    ì†”ì§í•˜ê³  í‘œí˜„ë ¥ì´ í’ë¶€í•´ ìì‹ ì˜ ê°ì •ì„ ìˆ¨ê¸°ì§€ ì•Šìœ¼ë©°, ì¹­ì°¬ì„ ë°›ìœ¼ë©´ ë”ìš± ë¹›ë‚˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ê´€ì‹¬ë°›ê³  ì‹¶ì€ ìš•êµ¬ê°€ ê°•í•´ ë•Œë¡œëŠ” ìê¸°ì¤‘ì‹¬ì ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆê³ , ê°ì • ê¸°ë³µì´
                    ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ì—´ì ì´ê³  ë‚™ì²œì ì¸ ì„±ê²© ë•ë¶„ì— ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ì‚¬ë‘ë°›ëŠ” ë§¤ë ¥ì„ ì§€ë…”ìŠµë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>ä¸</span> ì •í™” - ì´›ë¶ˆì˜ ê¸°ìš´</h3>
                <p>ì •í™”(ä¸ç«)ëŠ” ì–´ë‘  ì†ì—ì„œ ì€ì€í•˜ê²Œ ë¹›ë‚˜ëŠ” ì´›ë¶ˆì´ë‚˜ ë“±ë¶ˆì˜ ë”°ëœ»í•¨ì„ ìƒì§•í•©ë‹ˆë‹¤. ë³‘í™”ê°€ íƒœì–‘ì´ë¼ë©´ ì •í™”ëŠ” ì‘ì§€ë§Œ êº¼ì§€ì§€ ì•ŠëŠ” ë¶ˆê½ƒì²˜ëŸ¼ ë‚´ë©´ì— ê¹Šì€ ì—´ì •ì„ í’ˆê³  ìˆìŠµë‹ˆë‹¤. ê²‰ìœ¼ë¡œëŠ”
                    ì°¨ë¶„í•˜ê³  ì¡°ìš©í•´ ë³´ì´ì§€ë§Œ ì†ì—ëŠ” ê°•í•œ ê°ìˆ˜ì„±ê³¼ ì˜ˆìˆ ì  ê¸°ì§ˆì´ ìˆ¨ì–´ìˆì£ . ì •í™”ì¸ì€ ì„¸ì‹¬í•˜ê³  ë°°ë ¤ì‹¬ì´ ê¹Šì–´ íƒ€ì¸ì˜ ê°ì •ì„ ì˜ ì½ì§€ë§Œ, ê·¸ë§Œí¼ ìƒì²˜ë„ ì‰½ê²Œ ë°›ìŠµë‹ˆë‹¤. í•œë²ˆ ë§ˆìŒì— í’ˆì€
                    ê²ƒì€ ì˜¤ë˜ ê°„ì§í•˜ë©°, ì§‘ë…ì´ ê°•í•´ ëª©í‘œë¥¼ í–¥í•´ ë¬µë¬µíˆ ë‚˜ì•„ê°‘ë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>æˆŠ</span> ë¬´í†  - ì‚°ê³¼ ëŒ€ì§€ì˜ ê¸°ìš´</h3>
                <p>ë¬´í† (æˆŠåœŸ)ëŠ” ì›€ì§ì´ì§€ ì•ŠëŠ” ê±°ëŒ€í•œ ì‚°ì´ë‚˜ ë„ˆë¥¸ ëŒ€ì§€ì˜ ì•ˆì •ê°ì„ ìƒì§•í•©ë‹ˆë‹¤. ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ ë¯¿ìŒì§ìŠ¤ëŸ½ê³  ë“¬ì§í•˜ë©°, ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ë“ ë“ í•œ ë²„íŒ€ëª©ì´ ë˜ì–´ì¤ë‹ˆë‹¤. ë³€í™”ë³´ë‹¤ëŠ”
                    ì•ˆì •ì„ ì¶”êµ¬í•˜ê³ , í•œë²ˆ ìë¦¬ ì¡ìœ¼ë©´ ì‰½ê²Œ ì›€ì§ì´ì§€ ì•ŠëŠ” ì„±í–¥ì´ ìˆì£ . í¬ìš©ë ¥ì´ ë„“ì–´ ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ì„ í’ˆì„ ìˆ˜ ìˆì§€ë§Œ, ê³ ì§‘ì´ ì„¸ê³  ë³€í™”ì— ëŠë¦° í¸ì…ë‹ˆë‹¤. ë¬´í† ì¸ì€ ì‹ ë¢°ê°ì´ ìˆì–´
                    ë¦¬ë”ë‚˜ ì¤‘ì¬ì ì—­í• ì„ ë§¡ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>å·±</span> ê¸°í†  - ë…¼ë°­ì˜ ê¸°ìš´</h3>
                <p>ê¸°í† (å·±åœŸ)ëŠ” ìƒëª…ì„ í‚¤ì›Œë‚´ëŠ” ë…¼ë°­ì´ë‚˜ ì •ì›ì˜ ë¹„ì˜¥í•œ í™ì„ ìƒì§•í•©ë‹ˆë‹¤. ë¬´í† ê°€ ê±°ëŒ€í•œ ì‚°ì´ë¼ë©´ ê¸°í† ëŠ” ë¶€ë“œëŸ½ê²Œ ë§Œë¬¼ì„ í’ˆì–´ ì„±ì¥ì‹œí‚¤ëŠ” ëŒ€ì§€ì…ë‹ˆë‹¤. ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ í˜„ì‹¤ì ì´ê³ 
                    ì‹¤ìš©ì ì´ë©°, ìê¸° ì‚¬ëŒì—ê²ŒëŠ” í•œì—†ì´ ë² í‘¸ëŠ” ë”°ëœ»í•¨ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ê²‰ìœ¼ë¡œëŠ” ìˆœí•´ ë³´ì—¬ë„ ì†ìœ¼ë¡œëŠ” ê³„ì‚°ì´ ë¹ ë¥´ê³ , ì†í•´ ë³¼ ì¼ì€ ì² ì €íˆ í”¼í•˜ëŠ” ì˜ë¦¬í•¨ë„ ìˆìŠµë‹ˆë‹¤. ê¸°í† ì¸ì€
                    ë‹¤ì¬ë‹¤ëŠ¥í•˜ê³  ì—¬ëŸ¬ ë¶„ì•¼ì— ê´€ì‹¬ì´ ë§ì•„ ë‹¤ì–‘í•œ ì¬ëŠ¥ì„ ë°œíœ˜í•©ë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>åºš</span> ê²½ê¸ˆ - ê°•ì² ì˜ ê¸°ìš´</h3>
                <p>ê²½ê¸ˆ(åºšé‡‘)ì€ ë‹¨ë‹¨í•˜ê³  ë‚ ì¹´ë¡œìš´ ì‡ ë¶™ì´, ë¬´ê¸°ë‚˜ ë„ë¼ ê°™ì€ ê°•ì² ì˜ ê¸°ìš´ì„ ìƒì§•í•©ë‹ˆë‹¤. ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ ì •ì˜ë¡­ê³  ì˜í˜‘ì‹¬ì´ ê°•í•˜ë©°, ë¶ˆì˜ë¥¼ ë³´ë©´ ì°¸ì§€ ëª»í•˜ëŠ” ì„±ê²©ì…ë‹ˆë‹¤. ê²°ë‹¨ë ¥ì´
                    ë›°ì–´ë‚˜ê³  ì¶”ì§„ë ¥ì´ ê°•í•´ í•œë²ˆ ì •í•œ ëª©í‘œëŠ” ë°˜ë“œì‹œ ì´ë£¨ë ¤ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë„ˆë¬´ ì§ì„¤ì ì´ê³  ë‚ ì¹´ë¡œì›Œ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ìƒì²˜ë¥¼ ì¤„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ê²½ê¸ˆì¸ì€ ìê¸° ê´€ë¦¬ê°€ ì² ì €í•˜ê³  ì±…ì„ê°ì´
                    ê°•í•´ ë§¡ì€ ì¼ì„ ëê¹Œì§€ í•´ë‚´ëŠ” ì‹ ë¢°ë¥¼ ì¤ë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>è¾›</span> ì‹ ê¸ˆ - ë³´ì„ì˜ ê¸°ìš´</h3>
                <p>ì‹ ê¸ˆ(è¾›é‡‘)ì€ ì„¸ê³µëœ ë³´ì„ì´ë‚˜ ì •êµí•œ ì¥ì‹ êµ¬ì²˜ëŸ¼ ì„¬ì„¸í•˜ê³  ì•„ë¦„ë‹¤ìš´ ê¸°ìš´ì„ ìƒì§•í•©ë‹ˆë‹¤. ê²½ê¸ˆì´ ì›ì„ì´ë¼ë©´ ì‹ ê¸ˆì€ ë‹¤ë“¬ì–´ì§„ ë‹¤ì´ì•„ëª¬ë“œì²˜ëŸ¼ ì˜ˆë¦¬í•˜ê³  ë‚ ì¹´ë¡œìš´ ê°ê°ì„ ì§€ë…”ìŠµë‹ˆë‹¤. ì´ ê¸°ìš´ì„
                    ê°€ì§„ ì‚¬ëŒì€ ìì¡´ì‹¬ì´ ê°•í•˜ê³  ì™„ë²½ì„ ì¶”êµ¬í•˜ë©°, ì˜ˆë¯¼í•œ ê°ìˆ˜ì„±ìœ¼ë¡œ ë””í…Œì¼ì„ ë†“ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë‚¨ì˜ ì‹œì„ ì„ ì˜ì‹í•˜ê³  ë¹„íŒì— ë¯¼ê°í•œ í¸ì´ë¼ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ê¸° ì‰½ìŠµë‹ˆë‹¤. ì‹ ê¸ˆì¸ì€
                    í’ˆìœ„ì™€ ê²©ì¡°ë¥¼ ì¤‘ì‹œí•˜ë©° ìì‹ ë§Œì˜ ê¸°ì¤€ì´ í™•ê³ í•©ë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>å£¬</span> ì„ìˆ˜ - ë°”ë‹¤ì˜ ê¸°ìš´</h3>
                <p>ì„ìˆ˜(å£¬æ°´)ëŠ” ëì—†ì´ ë„“ê³  ê¹Šì€ ë°”ë‹¤ë‚˜ ìœ ìœ íˆ íë¥´ëŠ” í° ê°•ì˜ ê¸°ìš´ì„ ìƒì§•í•©ë‹ˆë‹¤. ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ ìŠ¤ì¼€ì¼ì´ í¬ê³  ìƒê°ì´ ììœ ë¡œìš°ë©°, ì–´ë””ì—ë„ ì–½ë§¤ì´ì§€ ì•Šìœ¼ë ¤ëŠ” ì„±í–¥ì´
                    ìˆìŠµë‹ˆë‹¤. ì°½ì˜ë ¥ê³¼ ì•„ì´ë””ì–´ê°€ ë„˜ì¹˜ê³  ìƒˆë¡œìš´ ê²ƒì— ëŒ€í•œ í˜¸ê¸°ì‹¬ì´ ê°•í•˜ì£ . í•˜ì§€ë§Œ ë§ˆë¬´ë¦¬ê°€ ì•½í•˜ê³  í•œ ê³³ì— ì§‘ì¤‘í•˜ê¸° ì–´ë ¤ì›Œ ì¼ì„ ëê¹Œì§€ í•´ë‚´ì§€ ëª»í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì„ìˆ˜ì¸ì€ ì†ì„
                    ì•Œê¸° ì–´ë ¤ìš´ ì‹ ë¹„ë¡œìš´ ë§¤ë ¥ì´ ìˆì–´ ì‚¬ëŒë“¤ì„ ëŒì–´ë‹¹ê¹ë‹ˆë‹¤.</p>
            </article>
            <article class="enc-card">
                <h3><span>ç™¸</span> ê³„ìˆ˜ - ì´ìŠ¬ê³¼ ë¹—ë¬¼ì˜ ê¸°ìš´</h3>
                <p>ê³„ìˆ˜(ç™¸æ°´)ëŠ” ì¡°ìš©íˆ ë‚´ë¦¬ëŠ” ë¹—ë¬¼ì´ë‚˜ ì•„ì¹¨ ì´ìŠ¬ì²˜ëŸ¼ ì„¬ì„¸í•˜ê³  ê³ ìš”í•œ ë¬¼ì˜ ê¸°ìš´ì„ ìƒì§•í•©ë‹ˆë‹¤. ì„ìˆ˜ê°€ ë°”ë‹¤ë¼ë©´ ê³„ìˆ˜ëŠ” ìŠ¤ë©°ë“œëŠ” ì§€í•˜ìˆ˜ì²˜ëŸ¼ ê²‰ìœ¼ë¡œ ë“œëŸ¬ë‚˜ì§€ ì•ŠëŠ” ê¹Šì€ ë‚´ë©´ì„ ì§€ë…”ìŠµë‹ˆë‹¤.
                    ì´ ê¸°ìš´ì„ ê°€ì§„ ì‚¬ëŒì€ ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ê°ì„±ì ì´ë©°, í˜¼ìë§Œì˜ ì„¸ê³„ì—ì„œ ë§ì€ ì‹œê°„ì„ ë³´ëƒ…ë‹ˆë‹¤. ë›°ì–´ë‚œ í†µì°°ë ¥ê³¼ ì§ê´€ë ¥ì´ ìˆì§€ë§Œ ì‹¤í–‰ë ¥ì´ ë¶€ì¡±í•´ ìƒê°ë§Œ í•˜ë‹¤ ëë‚˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.
                    ê³„ìˆ˜ì¸ì€ ì¡°ìš©í•˜ì§€ë§Œ ë³¸ì¸ë§Œì˜ ì² í•™ê³¼ ì„¸ê³„ê´€ì´ í™•ê³ í•©ë‹ˆë‹¤.</p>
            </article>
        </section>

        <!-- AdSense Content Section -->
        <section class="content-article"
            style="margin-top: 40px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 16px; text-align: left; color: #cbd5e1; line-height: 1.7;">
            <h2
                style="color: var(--cyan); margin-bottom: 16px; border-bottom: 2px solid var(--cyan); display: inline-block; padding-bottom: 4px;">
                ğŸ”® ì‚¬ì£¼ì™€ MBTIì˜ ë§Œë‚¨</h2>
            <p>ì‚¬ì£¼íŒ”ì(Four Pillars of Destiny)ëŠ” ë‹¨ìˆœí•œ ë¯¸ì‹ ì´ ì•„ë‹Œ, ìˆ˜ì²œ ë…„ê°„ ë°ì´í„°ë¥¼ ì¶•ì í•´ ì˜¨ ë™ì–‘ì˜ í†µê³„í•™ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ íƒœì–´ë‚œ ì—°, ì›”, ì¼, ì‹œì˜ ë„¤ ê¸°ë‘¥(Four
                Pillars)ì´ ìš°ì£¼ì˜ ì–´ë–¤ ê¸°ìš´ì„ ë°›ê³  íƒœì–´ë‚¬ëŠ”ì§€ë¥¼ ë¶„ì„í•˜ëŠ” í•™ë¬¸ì´ì£ . ë°˜ë©´ MBTIëŠ” ì„œì–‘ ì‹¬ë¦¬í•™ì˜ ê²°ì •ì²´ë¡œ, í˜„ì¬ ë‚˜ì˜ ì„±ê²© ìœ í˜•ì„ íŒŒì•…í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.</p>
            <br>
            <h3>ğŸŒŸ ì¼ê°„(Day Stem)ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?</h3>
            <p>'ì¼ê°„'ì€ ì‚¬ì£¼ì—ì„œ 'ë‚˜ ìì‹ 'ì„ ìƒì§•í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ê¸€ìì…ë‹ˆë‹¤. ë§ˆì¹˜ MBTIì˜ ì²« ê¸€ì(E/I)ì²˜ëŸ¼ ë‚˜ì˜ ê·¼ë³¸ì ì¸ ì—ë„ˆì§€ì™€ ê¸°ì§ˆì„ ê²°ì •í•©ë‹ˆë‹¤. ê°‘ëª©(ç”²), ì„ëª©(ä¹™), ë³‘í™”(ä¸™) ë“±
                10ê°œì˜ ì²œê°„(Ten Heavenly Stems) ì¤‘ í•˜ë‚˜ë¡œ ê²°ì •ë˜ë©°, ì´ ì‚¬ì´íŠ¸ì—ì„œëŠ” ë‹¹ì‹ ì˜ ì¼ê°„ì„ ë¶„ì„í•˜ì—¬ 'ì˜í˜¼ ìºë¦­í„°'ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
            <br>
            <h3>âš–ï¸ 2026ë…„ ë³‘ì˜¤ë…„(ä¸™åˆë…„)ì˜ ìš´ì„¸</h3>
            <p>2026ë…„ì€ 'ë¶‰ì€ ë§ì˜ í•´'ì¸ ë³‘ì˜¤ë…„ì…ë‹ˆë‹¤. ë³‘í™”(ä¸™ç«)ì˜ ê°•ë ¥í•œ íƒœì–‘ ì—ë„ˆì§€ì™€ ì˜¤í™”(åˆç«)ì˜ ëœ¨ê±°ìš´ ì—´ì •ì´ ë§Œë‚˜ëŠ” í•´ë¡œ, ë³€í™”ì™€ í˜ì‹ ì´ ì¼ì–´ë‚˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì‚¬ì£¼ ì˜¤í–‰ì´ ì´
                ëœ¨ê±°ìš´ ë¶ˆì˜ ê¸°ìš´ê³¼ ë§Œë‚¬ì„ ë•Œ ì–´ë–¤ í™”í•™ ë°˜ì‘ì´ ì¼ì–´ë‚ ê¹Œìš”? 'ì ìˆ ê°€ The Moon'ì—ì„œëŠ” ë§Œì„¸ë ¥ ì›ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¹ì‹ ì˜ ì˜¬í•´ ìš´ì„¸ë¥¼ ì •í™•í•˜ê²Œ ì˜ˆì¸¡í•´ ë“œë¦½ë‹ˆë‹¤.</p>
        </section>

        <footer
            style="margin-top: 60px; padding-bottom: 40px; text-align: center; color: var(--txt2); font-size: 0.8rem;">
            <p>&copy; 2026 ì ìˆ ê°€ The Moon. All rights reserved.</p>
            <div style="margin-top: 10px;">
                <span style="cursor: pointer; text-decoration: underline;"
                    onclick="document.getElementById('privacyModal').style.display='flex'">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span> |
                <a href="mailto:contact@example.com" style="color: var(--txt2); text-decoration: none;">ë¬¸ì˜í•˜ê¸°</a>
            </div>
            <p style="margin-top: 20px; font-size: 0.7rem; opacity: 0.6;">ë³¸ ì„œë¹„ìŠ¤ëŠ” ê³¼í•™ì  ê·¼ê±°ì— ê¸°ë°˜í•œ ì—”í„°í…Œì¸ë¨¼íŠ¸ ëª©ì ìœ¼ë¡œ ì œê³µë˜ë©°, ë§¹ì‹ ì€
                ê¸ˆë¬¼ì…ë‹ˆë‹¤.</p>
        </footer>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal-overlay"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; align-items:center; justify-content:center;">
        <div
            style="background:var(--bg); padding:24px; border-radius:16px; width:90%; max-width:500px; max-height:80vh; overflow-y:auto; border:1px solid var(--border);">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                <h3 style="margin:0; color:var(--cyan);">ğŸ”’ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</h3>
                <button onclick="document.getElementById('privacyModal').style.display='none'"
                    style="background:none; border:none; color:var(--txt2); font-size:1.5rem; cursor:pointer;">âœ•</button>
            </div>
            <div style="font-size:0.85rem; color:#cbd5e1; line-height:1.6; text-align:left;">
                <p><strong>1. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©</strong><br>ë³¸ ì„œë¹„ìŠ¤ëŠ” ë³„ë„ì˜ íšŒì›ê°€ì… ì—†ì´ ì´ìš© ê°€ëŠ¥í•˜ë©°, ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì…ë ¥í•˜ì‹  ìƒë…„ì›”ì¼, ì„±ë³„ ë“±ì˜ ì •ë³´ëŠ” ê²°ê³¼ ë¶„ì„
                    ìš©ë„ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì„œë²„ì— ì €ì¥ë˜ì§€ ì•Šê³  ë¸Œë¼ìš°ì € ë‚´ì—ì„œë§Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.</p>
                <br>
                <p><strong>2. ê°œì¸ì •ë³´ì˜ ì²˜ë¦¬ ëª©ì </strong><br>ì…ë ¥í•˜ì‹  ì •ë³´ëŠ” ì‚¬ì£¼ ëª…ì‹ ì‚°ì¶œ ë° ìš´ì„¸ ê²°ê³¼ ì œê³µì„ ìœ„í•´ì„œë§Œ í™œìš©ë©ë‹ˆë‹¤.</p>
                <br>
                <p><strong>3. ì¿ í‚¤(Cookie)ì˜ ìš´ìš©</strong><br>ì‚¬ìš©ì í¸ì˜ë¥¼ ìœ„í•´ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ê±°ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <br>
                <p><strong>4. ê´‘ê³  ê²Œì¬</strong><br>ë³¸ ì‚¬ì´íŠ¸ëŠ” Google AdSense ê´‘ê³ ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, Googleì€ ì‚¬ìš©ì ê´€ì‹¬ ê¸°ë°˜ ê´‘ê³ ë¥¼ ìœ„í•´ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•  ìˆ˜
                    ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
    <!-- MBTI Mini Popup -->
    <div id="mbtiMiniPopup" class="mini-popup">
        <button class="mini-close" onclick="this.parentElement.classList.remove('show')">âœ•</button>
        <span style="font-size:1.5rem">ğŸ¤”</span>
        <div style="flex:1">
            <div style="color:var(--cyan); font-weight:700; font-size:0.9rem">í˜„ì‹¤ì˜ ë‚˜ëŠ” ì–´ë–¨ê¹Œ?</div>
            <div style="color:var(--txt2); font-size:0.8rem">1ë¶„ì»· MBTI í…ŒìŠ¤íŠ¸ í•˜ê¸°</div>
        </div>
        <button class="mini-btn" onclick="startMbtiTest(); this.parentElement.classList.remove('show')">GO</button>
    </div>
    <script>
        const KAKAO_API_KEY = '14302bcc718209aaa470793e426fbb2a';
        if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) Kakao.init(KAKAO_API_KEY);
        const P = {
            'ç”²': { mbti: 'ENTJ', base: "ë‚¨ ë°‘ì—ì„  ì£½ì–´ë„ ì¼ ëª» í•¨. ë³¸ì¸ì´ ë‹¤ ë§ë‹¤ê³  ìƒê°í•¨. ë˜¥ê³ ì§‘ ë¶€ë¦¬ë‹¤ê°€ ë§í•´ë„ 'ì—­ì‹œ ë‚´ íƒ“ì´ ì•„ë‹˜' ì‹œì „. ê·¼ë° ë¦¬ë”ì‹­ì€ ìˆì–´ì„œ ë‹¤ë“¤ ìš•í•˜ë©´ì„œ ë”°ë¼ê°.", love: "ì—°ì• ì—ì„œë„ ë‚´ê°€ ë¦¬ë“œí•´ì•¼ ì§ì„±ì´ í’€ë¦¼. ë°ì´íŠ¸ ì½”ìŠ¤? ë‹¹ì—°íˆ ë‚´ê°€ ì •í•¨. ìƒëŒ€ë°© ì˜ê²¬? 'ì‘ ê·¸ë˜ ê·¼ë° ì—¬ê¸° ê°€ì'. ë°€ë‹¹ ê°™ì€ ê±° ì•ˆ í•¨. ëŒ€ì‹  ë³¸ì¸ë„ ì—„ì²­ í¼ì¤Œ.", money: "ëˆ ë²Œ ì¤„ì€ ì•„ëŠ”ë° ì“¸ ì¤„ë„ ì•. í° ê·¸ë¦¼ ê·¸ë¦¬ë‹¤ê°€ ì„¸ê¸ˆ í­íƒ„ ë§ê¸°ë„ í•¨. íˆ¬ì? ë³¸ì¸ íŒë‹¨ ë¯¿ê³  ì˜¬ì¸í•˜ëŠ” íƒ€ì…. ì„±ê³µí•˜ë©´ ì²œì¬, ì‹¤íŒ¨í•˜ë©´ ë¹šë”ë¯¸.", work: "ë³¸ì¸ì´ íŒ€ì¥ ì•„ë‹ˆë©´ ë¶ˆë§Œ í„°ì§. ìƒì‚¬ ë°‘ì—ì„œ 'ì˜ˆì˜ˆ' í•˜ëŠ” ê±° ì²´ì§ˆì ìœ¼ë¡œ ëª»í•¨. ì–´ì°¨í”¼ ì‚¬ì—…í•˜ê±°ë‚˜ ìµœì†Œ ì„ì› í•´ì•¼ í•¨.", advice: "ê³ ì§‘ ì¢€ ê·¸ë§Œ ë¶€ë¦¬ì„¸ìš”. ë‚¨ ë§ë„ ê°€ë” ë§ìŠµë‹ˆë‹¤." },
            'ä¹™': { mbti: 'ISFP', base: "ì–´ë”” ë˜ì ¸ë„ ì‚´ì•„ë‚¨ìŒ. ê°•í•œ ë†ˆí•œí… ì°°ì‹¹, ì•½í•œ ë†ˆí•œí… ì¿¨í•¨. ë©˜íƒˆ ê°ˆëŒ€ê¸´ í•œë° ë¿Œë¦¬ê°€ ì½˜í¬ë¦¬íŠ¸. ì ˆëŒ€ ì•ˆ ì£½ìŒ. ìƒì¡´ì™•ì„.", love: "ëˆˆì¹˜ë¡œ ë°€ë‹¹í•¨. ìƒëŒ€ë°© ë°˜ì‘ ë³´ë©´ì„œ ì ì ˆíˆ ë°€ê³  ë‹¹ê¸°ëŠ”ë°, ê°€ë” ë„ˆë¬´ ëˆˆì¹˜ ë´ì„œ ì§€ì¹¨. 'ë­ ë¨¹ê³  ì‹¶ì–´?' 'ì•„ë¬´ê±°ë‚˜~' ì´ëŸ¬ë‹¤ ì§„ì§œ ì•„ë¬´ê±°ë‚˜ ì‹œì¼œì£¼ë©´ ì‚ì¹¨.", money: "ì‹¤ì†íŒŒì„. í‹° ì•ˆ ë‚˜ê²Œ ì•Œëœ°í•˜ê²Œ ëª¨ìŒ. ì„¸ì¼ì´ë‹¤ ì‹¶ìœ¼ë©´ ì¼ë‹¨ ì‚¬ì¬ê¸°. ê·¼ë° ê°€ë” ê°€ì„±ë¹„ì— ëˆˆ ë©€ì–´ì„œ í•„ìš” ì—†ëŠ” ê²ƒë„ ì‚¼.", work: "ì ì‘ë ¥ ç”². ì–´ë””ì„œë“  ë¶„ìœ„ê¸° íŒŒì•… ë¹ ë¦„. ë‹¤ë§Œ ìŠ¹ì§„ ê²½ìŸì—ì„  ë°€ë¦´ ìˆ˜ ìˆìŒ. ê°€ë” ì˜ê²¬ ì¢€ ë‚´ì„¸ìš”.", advice: "ì—¬ê¸°ì €ê¸° ë¶™ëŠ” ê²ƒë„ ëŠ¥ë ¥ì¸ë° ë°•ì¥ì§“ì€ ì ë‹¹íˆ." },
            'ä¸™': { mbti: 'ESFP', base: "ë³¸ì¸ì´ ì£¼ì¸ê³µ ì•„ë‹ˆë©´ ë³‘ ë‚¨. ì¹­ì°¬í•˜ë©´ ê°„ ì“¸ê°œ ë¹¼ì¤Œ. ì˜¤ì§€ë– íƒœí‰ì–‘. ê·¼ë° ëŒì•„ì„œë©´ ê¹Œë¨¹ìŒ. ë‹¨ìˆœí•¨ ëíŒì™•.", love: "ì¢‹ì•„í•˜ë©´ ì˜¨ ì„¸ìƒì— ê´‘ê³ í•¨. SNSì— ëŸ½ìŠ¤íƒ€ í­ê²©. ì§ˆíˆ¬ë„ í™”ëˆí•¨. ê´€ì‹¬ ì•ˆ ì£¼ë©´ 'ë‚˜ ì‹«ì–´í•´?' ì§‘ì°© ëª¨ë“œ ëŒì….", money: "ë²ˆ ë§Œí¼ ì”€. í†µì¥ì´ ë¡¤ëŸ¬ì½”ìŠ¤í„°. í—ˆì„¸ ì§€ì¶œ ë§ìŒ. ë‚¨ ë³´ê¸° ì¢‹ì€ ê³³ì— ëˆ ì”€. ì¹´ë“œê°’ í­íƒ„ ì£¼ì˜.", work: "ë°œí‘œ, PT ì²´ì§ˆì„. ë¬´ëŒ€ì—ì„œ ë¹›ë‚¨. ë‹¤ë§Œ íŒ©íŠ¸ì²´í¬ ì•ˆ í•˜ê³  ë¶„ìœ„ê¸°ë¡œ ê°€ë‹¤ê°€ í„¸ë¦¼. ë””í…Œì¼ ì¢€ ì±™ê¸°ì„¸ìš”.", advice: "ë‚¨ ì‹ ê²½ ëŒ ì‹œê°„ì— ë³¸ì¸ ì•ê°€ë¦¼ë¶€í„°." },
            'ä¸': { mbti: 'INFJ', base: "ê²‰ì€ ì²œì‚¬, ì†ì€ ë°ìŠ¤ë…¸íŠ¸. í•œë²ˆ ì‚ì§€ë©´ 10ë…„ ë’¤ì— ë³µìˆ˜í•¨. ìƒˆë²½ ê°ì„± ê¸€ ì˜¬ë¦¬ê³  ì•„ì¹¨ì— ì´ë¶ˆ í‚¥.", love: "ê²‰ì¿¨ì†ë”°. í‘œí˜„ ì•ˆ í•˜ëŠ”ë° ì†ìœ¼ë¡  24ì‹œê°„ ìƒê° ì¤‘. í—Œì‹ í˜•ì´ë¼ í¼ì£¼ëŠ”ë° ì •ì‘ í‘œí˜„ ëª»í•´ì„œ ì†í•´ë´„.", money: "ê¼¼ê¼¼íˆ ëª¨ìœ¼ëŠ” ìŠ¤íƒ€ì¼. ê°€ê³„ë¶€ ì“°ê³  ì˜ˆì‚° ì§¬. ê·¼ë° ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒí•œí… ì§€ê°‘ì´ ì—´ë¦¼. ì„ ë¬¼ í­íƒ„.", work: "ë¬µë¬µíˆ ì¼í•˜ëŠ”ë° í‹°ë¥¼ ì•ˆ ë‚´ì„œ ê³µë¡œ ëºê¹€. ì…€í”„ PR ì¢€ í•˜ì„¸ìš”. ê°€ë§Œíˆ ìˆìœ¼ë©´ ì•„ë¬´ë„ ëª°ë¼ìš”.", advice: "í˜¼ì ì†Œì„¤ ì“°ì§€ ë§ê³  ë§ë¡œ í•˜ì„¸ìš”." },
            'æˆŠ': { mbti: 'ESTJ', base: "ì†ì„ ì•Œ ìˆ˜ ì—†ìŒ. ì¢‹ì€ì§€ ì‹«ì€ì§€ ë§ ì•ˆ í•¨. ê·¸ëƒ¥ ìˆìŒ. ê³ ì§‘ ì „êµ 1ë“±. ê±´ë“œë¦¬ë©´ ì‚°ì‚¬íƒœ.", love: "ì•ˆì •ì  ì—°ì•  ì¶”êµ¬. í•œë²ˆ ì‚¬ê·€ë©´ ì˜¤ë˜ê°. ê·¼ë° ë³€í™”ê°€ ì—†ì–´ì„œ ìƒëŒ€ë°© ì§€ë£¨í•´í•¨. ì´ë²¤íŠ¸ ì¢€ í•´ìš”.", money: "ì•ˆì „í•œ ì¬í…Œí¬. ë¶€ë™ì‚°, ì ê¸ˆ ì¢‹ì•„í•¨. ë¦¬ìŠ¤í¬ ì‹«ì–´í•¨. ê·¼ë° ì¢‹ì€ ê¸°íšŒë„ ê·€ì°®ì•„ì„œ ë†“ì¹¨.", work: "ì¡°ì§ì˜ ë²„íŒ€ëª©. ì‹ ë¢°ê° ìˆìŒ. ë‹¤ë§Œ ë³€í™”ì— ëŠë ¤ì„œ ë’¤ì²˜ì§ˆ ìˆ˜ ìˆìŒ. ìƒˆë¡œìš´ ê±° ë°°ìš°ì„¸ìš”.", advice: "í‘œí˜„ ì•ˆ í•˜ë©´ ì•„ë¬´ë„ ëª°ë¼ìš”. ë§ ì¢€ í•˜ì„¸ìš”." },
            'å·±': { mbti: 'ISFJ', base: "ì°©í•œ ì²™í•˜ëŠ”ë° ê³„ì‚°ê¸° ìµœê°•. ë‚´ ì‚¬ëŒí•œí… í¼ì£¼ê³  ë‚¨ì´ë©´ êµ­ë¬¼ë„ ì—†ìŒ. ë‹µì •ë„ˆ.", love: "ì—°ì• ë„ ê³„ì‚°ì . ì†í•´ ë³¼ ì—°ì•  ì•ˆ í•¨. ê·¼ë° í•œë²ˆ ì§„ì‹¬ ì£¼ë©´ ì˜¬ì¸. ê·¸ ì§„ì‹¬ê¹Œì§€ ì˜¤ë˜ ê±¸ë¦¼.", money: "ëˆ ê´€ë¦¬ ì‹ . ë…¸í›„ëŒ€ë¹„ ì™„ë²½. 20ëŒ€ë¶€í„° ì—°ê¸ˆ ë“¦. ê·¼ë° ë„ˆë¬´ ì•„ê»´ì„œ ì¸ìƒ‰í•´ ë³´ì¼ ìˆ˜ ìˆìŒ.", work: "ì‹¤ë¬´ ëŠ¥ë ¥ ì¢‹ìŒ. ë¶ˆí•„ìš”í•œ ì¼ ì•ˆ í•¨. ë‹¤ë§Œ í‹° ì•ˆ ë‚´ì„œ ì¸ì • ëª» ë°›ìŒ. ì–´í•„í•˜ì„¸ìš”.", advice: "ì°©í•œ ì²™ ì ë‹¹íˆ. ê³„ì‚°ê¸° ì†Œë¦¬ ë‹¤ ë“¤ë ¤ìš”." },
            'åºš': { mbti: 'ESTP', base: "ì…ë§Œ ì—´ë©´ íŒ©í­. 'ì‚´ìª˜ì–´?'ë¥¼ 'ê±´ê°• ê±±ì •ë¼ì„œ'ë¡œ í¬ì¥. ë’¤ëì€ ì—†ëŠ”ë° ì•ëì´ ì©”ì–´ì„œ ë©˜íƒˆ ê°€ë£¨ ë§Œë“¦.", love: "ì§ì§„í˜•. ì¢‹ìœ¼ë©´ ë°”ë¡œ ê³ ë°±. ë°€ë‹¹ ì—†ìŒ. ê·¼ë° ì—°ì•  ì¤‘ì—ë„ ì§ì„¤ì ì´ë¼ ìƒì²˜ ì¤Œ. í•„í„°ë§ ì¢€.", money: "í•œë°© ìŠ¤íƒ€ì¼. í¬ê²Œ ë²Œê±°ë‚˜ í¬ê²Œ ìƒê±°ë‚˜. ì†ì ˆ íƒ€ì´ë° ëª» ì¡ì•„ì„œ ê³ ì§‘ ë¶€ë¦¬ë‹¤ ë” ìƒìŒ.", work: "ì¶”ì§„ë ¥ ç”². ê·¼ë° ìƒì‚¬ë‘ ì¶©ëŒ ë§ìŒ. ë³¸ì¸ì´ ëŒ€ì¥ í•´ì•¼ ìŠ¤íŠ¸ë ˆìŠ¤ ì•ˆ ë°›ìŒ. ì°½ì—… ê³ ë ¤í•˜ì„¸ìš”.", advice: "ê·¸ ì… ì¢€ ë‹¤ë¬´ì„¸ìš”. íŒ©íŠ¸ê°€ ë‹¤ ì •ì˜ëŠ” ì•„ë‹™ë‹ˆë‹¤." },
            'è¾›': { mbti: 'INTP', base: "ìê¸°ì•  ìµœê°•. ë‚´ê°€ ì œì¼ ì†Œì¤‘. ë‚¨ì´ ê±´ë“œë¦¬ë©´ ê·¹í˜. ì¹¼ë‚  ê°™ì€ ë§íˆ¬. ê¹”ë” ë– ëŠ”ë° ë°©ì€ ë”ëŸ¬ì›€.", love: "ì´ìƒí˜• ê¸°ì¤€ ë†’ìŒ. ì•„ë¬´ë‚˜ ì•ˆ ë§Œë‚¨. í•œë²ˆ ë¹ ì§€ë©´ ì§‘ì°©. ëª¨ë“  ê²ƒ ì²´í¬í•¨. ë¯¿ìŒ ê°€ì§€ì„¸ìš”.", money: "ê¼¼ê¼¼ ì¬í…Œí¬. í¬íŠ¸í´ë¦¬ì˜¤ ì˜ ì§¬. ê·¼ë° ëª…í’ˆ ì¢‹ì•„í•´ì„œ ìì¡´ì‹¬ ì†Œë¹„ë„ ìˆìŒ.", work: "ë””í…Œì¼ ì¥ì¸. ì™„ì„±ë„ ë†’ìŒ. ê·¼ë° ì™„ë²½ì£¼ì˜ë¼ ìŠ¤íŠ¸ë ˆìŠ¤. ë‚¨ ì¼ì— ê°„ì„­ ë§ê³  ë³¸ì¸ ì¼ë§Œ.", advice: "ë‚¨ ì§€ì  ì „ì— ê±°ìš¸ë¶€í„°. ë‹˜ë„ ì™„ë²½ ì•„ë‹˜." },
            'å£¬': { mbti: 'ENTP', base: "ë¨¸ë¦¬ íšŒì „ ë¹ ë¦„. ê·¼ë° ì”ë¨¸ë¦¬. ìŠ¤ì¼€ì¼ í¬ê²Œ ë…¸ëŠ”ë° ë§ˆë¬´ë¦¬ ì•ˆ ë¨. ì†ì„ ëª¨ë¥´ê² ëŠ” ìŒí‰í•¨ì´ ë§¤ë ¥.", love: "ììœ ë¡œìš´ ì—°ì• . êµ¬ì†í•˜ë©´ ë„ë§ê°. ì¸ë§Œ 100ê°œ. ì§„ì‹¬ ê½‚íˆë©´ ë¡œë§¨í‹±í•œë° ê·¸ê²Œ ì–¸ì œì¼ì§€ ëª¨ë¦„.", money: "ìŠ¤ì¼€ì¼ í° íˆ¬ì ì¢‹ì•„í•¨. ê·¼ë° í—ˆí™©ëœ ê²ƒë„ ë§ìŒ. ì¹œêµ¬ ì‚¬ì—… íˆ¬ìí•˜ë‹¤ ë‚ ë¦¬ê¸°ë„. í˜„ì‹¤ì ìœ¼ë¡œ.", work: "ì•„ì´ë””ì–´ë§¨. ê¸°íš ê¸°ê°€ ë§‰í˜. ê·¼ë° ì‹¤í–‰ë ¥ ë¶€ì¡±. ì‹¤í–‰ë ¥ ìˆëŠ” íŒŒíŠ¸ë„ˆ ì°¾ìœ¼ì„¸ìš”.", advice: "ì”ë¨¸ë¦¬ êµ´ë¦¬ë‹¤ ìê¸° ê¾€ì— ë„˜ì–´ê°‘ë‹ˆë‹¤." },
            'ç™¸': { mbti: 'INFP', base: "ë§ìƒìœ¼ë¡œ ìš°ì£¼ ì •ë³µ. ì‹¤í–‰ë ¥ ì œë¡œ. ê°ì • ë¡¤ëŸ¬ì½”ìŠ¤í„°. ê·¼ë° ì•„ì´ë””ì–´ëŠ” ë¯¸ì¹¨. ì²œì¬ì„±.", love: "ë¨¸ë¦¿ì†ìœ¼ë¡  ë¡œë§¨í‹± ê·¹ì¹˜. í˜„ì‹¤ì€ ì•„ë¬´ê²ƒë„ ì•ˆ í•¨. ìƒìƒ ì†ì—ì„œ ì—°ì• í•˜ê³  ì´ë³„í•¨. ì›€ì§ì´ì„¸ìš”.", money: "ì „ëµì€ ì˜ ì§œëŠ”ë° ì‹¤í–‰ ì•ˆ í•¨. 'ì´ë²ˆ ë‹¬ë¶€í„° ì ê¸ˆ'í•˜ê³  6ê°œì›”ì§¸. ìë™ì´ì²´ ê±¸ì–´ë†“ìœ¼ì„¸ìš”.", work: "ë¸Œë ˆì¸ìŠ¤í† ë° ë¹›ë‚¨. ê·¼ë° ê·¸ ë‹¤ìŒì´ ì—†ìŒ. ëˆ„ê°€ ëŒì–´ì¤˜ì•¼ ë¹›ë‚˜ëŠ” íƒ€ì….", advice: "ìƒê° ê·¸ë§Œí•˜ê³  ì¼ë‹¨ ì‹œì‘í•˜ì„¸ìš”." }
        };
        // Ten Gods (Ship-seong) Logic for Dynamic Fortune
        const TEN_GODS = {
            'Bi-gyeon': { name: 'ë¹„ê²¬(æ¯”è‚©)', keywords: ['ìì¡´ê°', 'ê²½ìŸ', 'ë…ë¦½'], desc: 'ë‚˜ì™€ ê°™ì€ ê¸°ìš´ì´ ë“¤ì–´ì˜¤ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì£¼ê´€ì´ ëšœë ·í•´ì§€ê³  ìì‹ ê°ì´ ë„˜ì¹˜ì§€ë§Œ, ê³ ì§‘ì´ ì„¸ì ¸ ì£¼ë³€ê³¼ ë§ˆì°°ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²½ìŸë³´ë‹¤ëŠ” í˜‘ë ¥ì„ íƒí•˜ì„¸ìš”.' },
            'Geop-jae': { name: 'ê²ì¬(åŠ«è²¡)', keywords: ['ìŠ¹ë¶€ìš•', 'ì§€ì¶œ', 'ë„ì „'], desc: 'ê²½ìŸì‹¬ì´ ë¶ˆíƒ€ì˜¤ë¥´ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì˜ì™¸ì˜ ì§€ì¶œì´ë‚˜ ì†ì¬ìˆ˜ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì§€ê°‘ì„ ë‹«ìœ¼ì„¸ìš”. í•˜ì§€ë§Œ ìŠ¹ë¶€ìˆ˜ë¥¼ ë„ìš°ê¸°ì—” ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤.' },
            'Sik-sin': { name: 'ì‹ì‹ (é£Ÿç¥)', keywords: ['í‘œí˜„', 'ì—¬ìœ ', 'ë¨¹ì„ë³µ'], desc: 'ì˜ì‹ì£¼ê°€ í’ìš”ë¡œì›Œì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì°½ì˜ë ¥ì´ ì†Ÿì•„ë‚˜ê³  ë§ì†œì”¨ê°€ ì¢‹ì•„ì§‘ë‹ˆë‹¤. ë§›ìˆëŠ” ê²ƒì„ ë¨¹ê±°ë‚˜ ì·¨ë¯¸ ìƒí™œì„ ì¦ê¸°ê¸°ì— ì™„ë²½í•©ë‹ˆë‹¤.' },
            'Sang-gwan': { name: 'ìƒê´€(å‚·å®˜)', keywords: ['ì–¸ë³€', 'ë°˜í•­', 'ì•„ì´ë””ì–´'], desc: 'ê¸°ì¡´ì˜ í‹€ì„ ê¹¨ê³  ì‹¶ì€ ìš•êµ¬ê°€ ê°•í•´ì§‘ë‹ˆë‹¤. í†¡í†¡ íŠ€ëŠ” ì•„ì´ë””ì–´ë¡œ ì£¼ëª©ë°›ì§€ë§Œ, ë§ì‹¤ìˆ˜(êµ¬ì„¤ìˆ˜)ë¥¼ ì¡°ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤.' },
            'Pyeon-jae': { name: 'í¸ì¬(åè²¡)', keywords: ['íš¡ì¬ìˆ˜', 'ìœ í¥', 'í°ëˆ'], desc: 'ì˜ˆìƒì¹˜ ëª»í•œ ëˆì´ ë“¤ì–´ì˜¤ê±°ë‚˜ ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì‚¬ì—…ì  ìˆ˜ì™„ì´ ì¢‹ì•„ì§€ê³  ìœ í¥ì„ ì¦ê¸°ê³  ì‹¶ì–´ì§‘ë‹ˆë‹¤. ë¡œë˜ í•œ ì¥ ì‚¬ë³´ì„¸ìš”!' },
            'Jeong-jae': { name: 'ì •ì¬(æ­£è²¡)', keywords: ['ì„±ì‹¤', 'ì €ì¶•', 'ì•ˆì •'], desc: 'ê¼¼ê¼¼í•˜ê³  í˜„ì‹¤ì ì¸ íŒë‹¨ë ¥ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤. ì°¨ê³¡ì°¨ê³¡ ì¬ë¬¼ì„ ëª¨ìœ¼ê¸°ì— ì¢‹ìŠµë‹ˆë‹¤. ê³„íšì ì¸ ì†Œë¹„ì™€ íˆ¬ìê°€ ë¹›ì„ ë°œí•©ë‹ˆë‹¤.' },
            'Pyeon-gwan': { name: 'í¸ê´€(åå®˜)', keywords: ['ì±…ì„', 'ìŠ¤íŠ¸ë ˆìŠ¤', 'ì¹´ë¦¬ìŠ¤ë§ˆ'], desc: 'ì±…ì„ê°ì´ ë¬´ê±°ì›Œì§€ê³  ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‚œê´€ì„ ê·¹ë³µí•˜ë©´ í° ëª…ì˜ˆë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ê±´ê°• ê´€ë¦¬ì— ìœ ì˜í•˜ì„¸ìš”.' },
            'Jeong-gwan': { name: 'ì •ê´€(æ­£å®˜)', keywords: ['ìŠ¹ì§„', 'ëª…ì˜ˆ', 'ì›ì¹™'], desc: 'ê³µëª…ì •ëŒ€í•˜ê³  ë°”ë¥¸ ìƒí™œì„ í•˜ê²Œ ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì§ì¥ì—ì„œëŠ¥ë ¥ì„ ì¸ì •ë°›ê±°ë‚˜ í•©ê²©ìš´ì´ ë”°ë¦…ë‹ˆë‹¤. ì›ì¹™ì„ ì§€í‚¤ë©´ ë³µì´ ì˜µë‹ˆë‹¤.' },
            'Pyeon-in': { name: 'í¸ì¸(åå°)', keywords: ['ì§ê´€', 'ëˆˆì¹˜', 'ê³ ë…'], desc: 'ëˆˆì¹˜ê°€ ë¹¨ë¼ì§€ê³  ì§ê´€ë ¥ì´ ì˜ˆë¦¬í•´ì§‘ë‹ˆë‹¤. ë‚¨ë“¤ì´ ëª» ë³´ëŠ” ê²ƒì„ ë³´ì§€ë§Œ, ìƒê°ì´ ë„ˆë¬´ ë§ì•„ ìš°ìš¸í•´ì§ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ëª…ìƒì´ë‚˜ ê³µë¶€ê°€ ì˜ ë©ë‹ˆë‹¤.' },
            'Jeong-in': { name: 'ì •ì¸(æ­£å°)', keywords: ['ì¸ì •', 'í•™ì—…', 'ê·€ì¸'], desc: 'ì£¼ë³€ì˜ ë„ì›€ê³¼ ì¸ì •ì„ ë°›ëŠ” ì‚¬ë‘ìŠ¤ëŸ¬ìš´ ì‹œê¸°ì…ë‹ˆë‹¤. ë¬¸ì„œìš´ì´ ì¢‹ê³  ê³µë¶€ë‚˜ ê³„ì•½ì— ìœ ë¦¬í•©ë‹ˆë‹¤. ìœ—ì‚¬ëŒì—ê²Œ ì˜ˆì¨ì„ ë°›ìŠµë‹ˆë‹¤.' }
        };

        // Mapping: User's Element + Current Element -> Ten God
        // [User Stem] -> { [Current Stem]: TenGodKey }
        // Simplification for prototype: Mapping based on Element Relationship
        // Same Element (Wood-Wood): Bi-gyeon/Geop-jae
        // Generating Output (Wood-Fire): Sik-sin/Sang-gwan
        // Being Controlled (Wood-Metal): Pyeon-gwan/Jeong-gwan
        // Controlling (Wood-Earth): Pyeon-jae/Jeong-jae
        // Generating Input (Wood-Water): Pyeon-in/Jeong-in
        const REL_MAP = {
            same: ['Bi-gyeon', 'Geop-jae'],
            output: ['Sik-sin', 'Sang-gwan'],
            control_me: ['Pyeon-gwan', 'Jeong-gwan'],
            i_control: ['Pyeon-jae', 'Jeong-jae'],
            input: ['Pyeon-in', 'Jeong-in']
        };
        const E = { WOOD: { img: 'images/Wood.png', c: '#4ade80' }, FIRE: { img: 'images/Fire.png', c: '#f87171' }, EARTH: { img: 'images/Earth.png', c: '#fbbf24' }, METAL: { img: 'images/Metal.png', c: '#e2e8f0' }, WATER: { img: 'images/Water.png', c: '#60a5fa' } };
        const EM = { 'ç”²': 'WOOD', 'ä¹™': 'WOOD', 'ä¸™': 'FIRE', 'ä¸': 'FIRE', 'æˆŠ': 'EARTH', 'å·±': 'EARTH', 'åºš': 'METAL', 'è¾›': 'METAL', 'å£¬': 'WATER', 'ç™¸': 'WATER', 'å¯…': 'WOOD', 'å¯': 'WOOD', 'å·³': 'FIRE', 'åˆ': 'FIRE', 'è¾°': 'EARTH', 'æˆŒ': 'EARTH', 'ä¸‘': 'EARTH', 'æœª': 'EARTH', 'ç”³': 'METAL', 'é…‰': 'METAL', 'äº¥': 'WATER', 'å­': 'WATER' };
        const LK = { WOOD: { c: 'ğŸŒ¿ ê·¸ë¦°/ë¯¼íŠ¸', i: 'ì‹ë¬¼, ë™ìª½ ì‚°ì±…' }, FIRE: { c: 'ğŸ”´ ë ˆë“œ/í¼í”Œ', i: 'ìº”ë“¤, í–‡ë¹›' }, EARTH: { c: 'ğŸŸ¡ ì˜ë¡œìš°', i: 'ë„ìê¸°' }, METAL: { c: 'âšª í™”ì´íŠ¸/ì‹¤ë²„', i: 'ì¥¬ì–¼ë¦¬' }, WATER: { c: 'ğŸ”µ ë¸”ë™/ë„¤ì´ë¹„', i: 'ë¬¼ ë§ì´ ë§ˆì‹œê¸°' } };
        // ì²œê°„â†’ì˜¤í–‰ / ìƒìƒìƒê·¹ ê¶í•©
        const STEM_EL = { 'ç”²': 'WOOD', 'ä¹™': 'WOOD', 'ä¸™': 'FIRE', 'ä¸': 'FIRE', 'æˆŠ': 'EARTH', 'å·±': 'EARTH', 'åºš': 'METAL', 'è¾›': 'METAL', 'å£¬': 'WATER', 'ç™¸': 'WATER' };
        const GENERATING = { WOOD: 'WATER', FIRE: 'WOOD', EARTH: 'FIRE', METAL: 'EARTH', WATER: 'METAL' }; // ë‚˜ë¥¼ ë„ì™€ì£¼ëŠ”
        const OVERCOMING = { WOOD: 'METAL', FIRE: 'WATER', EARTH: 'WOOD', METAL: 'FIRE', WATER: 'EARTH' }; // ë‚˜ë¥¼ ê·¹í•˜ëŠ”
        const ELEMENT_STEM = { WOOD: 'ç”²', FIRE: 'ä¸™', EARTH: 'æˆŠ', METAL: 'åºš', WATER: 'å£¬' };
        const ELEMENT_COLORS = { WOOD: { bg: '#10b981', t: '#fff' }, FIRE: { bg: '#ef4444', t: '#fff' }, EARTH: { bg: '#eab308', t: '#1f2937' }, METAL: { bg: '#f8fafc', t: '#374151' }, WATER: { bg: '#1e1b4b', t: '#c4b5fd' } };
        const ELEMENT_NAMES = { WOOD: 'ëª©(æœ¨)', FIRE: 'í™”(ç«)', EARTH: 'í† (åœŸ)', METAL: 'ê¸ˆ(é‡‘)', WATER: 'ìˆ˜(æ°´)' };
        let uName = '', fType = 'today', curDm = '', curPd = null, curTheme = 'base', gender = 'M';
        let userMbti = ''; // Store tested MBTI
        const trailCanvas = document.getElementById('trailCanvas'), tCtx = trailCanvas.getContext('2d'); let particles = [];
        function resizeTrail() { trailCanvas.width = innerWidth; trailCanvas.height = innerHeight } resizeTrail(); addEventListener('resize', resizeTrail);
        class Particle { constructor(x, y, b = false) { this.x = x; this.y = y; this.size = b ? Math.random() * 6 + 3 : Math.random() * 4 + 2; this.color = ['#00FFFF', '#E0B0FF', '#FFFFFF'][Math.floor(Math.random() * 3)]; this.alpha = 1; this.decay = b ? .03 : .02; const a = Math.random() * Math.PI * 2, s = b ? Math.random() * 4 + 2 : Math.random() + .5; this.vx = Math.cos(a) * s; this.vy = Math.sin(a) * s } update() { this.x += this.vx; this.y += this.vy; this.alpha -= this.decay; this.size *= .96 } draw() { tCtx.save(); tCtx.globalAlpha = this.alpha; tCtx.fillStyle = this.color; tCtx.shadowBlur = 15; tCtx.shadowColor = this.color; tCtx.beginPath(); tCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2); tCtx.fill(); tCtx.restore() } isAlive() { return this.alpha > 0 } }
        function animateTrail() { tCtx.clearRect(0, 0, trailCanvas.width, trailCanvas.height); particles = particles.filter(p => p.isAlive()); particles.forEach(p => { p.update(); p.draw() }); requestAnimationFrame(animateTrail) } animateTrail();
        let lastT = 0; document.addEventListener('mousemove', e => { const n = Date.now(); if (n - lastT > 30) { for (let i = 0; i < 3; i++)particles.push(new Particle(e.clientX, e.clientY)); lastT = n } });
        document.addEventListener('touchstart', e => { const t = e.touches[0]; for (let i = 0; i < 15; i++)particles.push(new Particle(t.clientX, t.clientY, true)) });
        document.querySelectorAll('.fortune-sel button').forEach(b => b.onclick = () => { document.querySelectorAll('.fortune-sel button').forEach(x => x.classList.remove('on')); b.classList.add('on'); fType = b.dataset.t; updateQuest() });
        document.querySelectorAll('.gender-sel button').forEach(b => b.onclick = () => { document.querySelectorAll('.gender-sel button').forEach(x => x.classList.remove('on')); b.classList.add('on'); gender = b.dataset.g });
        document.querySelectorAll('.tab-row button').forEach(b => b.onclick = () => { document.querySelectorAll('.tab-row button').forEach(x => x.classList.remove('on')); document.querySelectorAll('.tab-c').forEach(x => x.classList.remove('on')); b.classList.add('on'); document.getElementById('tab-' + b.dataset.tab).classList.add('on') });
        document.querySelectorAll('.theme-tabs button').forEach(b => b.onclick = () => { document.querySelectorAll('.theme-tabs button').forEach(x => x.classList.remove('on')); b.classList.add('on'); curTheme = b.dataset.th; updateTheme() });
        const yS = document.getElementById('selYear'), mS = document.getElementById('selMonth'), dS = document.getElementById('selDay'), hS = document.getElementById('selHour'), minS = document.getElementById('selMinute');
        for (let y = new Date().getFullYear(); y >= 1920; y--)yS.innerHTML += `<option value="${y}">${y}</option>`;
        for (let m = 1; m <= 12; m++)mS.innerHTML += `<option value="${m}">${m}ì›”</option>`;
        for (let d = 1; d <= 31; d++)dS.innerHTML += `<option value="${d}">${d}</option>`;
        for (let h = 1; h <= 12; h++)hS.innerHTML += `<option value="${h}">${h}ì‹œ</option>`;
        for (let m = 0; m < 60; m++)minS.innerHTML += `<option value="${m}">${String(m).padStart(2, '0')}ë¶„</option>`;
        document.getElementById('unknownTime').onchange = e => { const t = document.getElementById('timeInputs'); t.style.opacity = e.target.checked ? '.4' : '1'; t.style.pointerEvents = e.target.checked ? 'none' : 'auto' };
        function updateTheme() { if (!curPd) return; const k = { base: 'base', love: 'love', money: 'money', work: 'work' }; document.getElementById('storyBox').innerHTML = curPd[k[curTheme]] || curPd.base; document.getElementById('adviceTxt').innerHTML = curPd.advice }
        // Advanced Saju Logic: Modifiers (Extended)
        const BRANCH_MODIFIERS = {
            'å­': { k: 'ì°½ì˜ì ', d: 'ìƒê°ì´ ê¹Šê³  ë¹„ë°€ì´ ë§ìŒ.', love: 'ìƒëŒ€ë°©ì˜ ë§ˆìŒì„ ê¹Šì´ í—¤ì•„ë¦¬ì§€ë§Œ, ì†ë§ˆìŒì„ ì˜ ë“œëŸ¬ë‚´ì§€ ì•Šì•„ ì˜¤í•´ë¥¼ ì‚¬ê¸°ë„ í•©ë‹ˆë‹¤.', money: 'ëˆì„ ìˆ¨ê²¨ë‘ëŠ” ì¬ì£¼ê°€ ìˆì–´ ë¹„ìƒê¸ˆì„ ì˜ ë§Œë“­ë‹ˆë‹¤.', work: 'ê¸°íšì´ë‚˜ ì•„ì´ë””ì–´ ë¶„ì•¼ì—ì„œ ë‘ê°ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.' },
            'ä¸‘': { k: 'ì„±ì‹¤í•¨', d: 'ë¬µë¬µíˆ ìì‹ ì˜ ê¸¸ì„ ê°.', love: 'í•œë²ˆ ì‚¬ë‘í•˜ë©´ ëê¹Œì§€ ì±…ì„ì§€ë ¤ í•˜ëŠ” ì§„êµ­ì…ë‹ˆë‹¤. ë‹¤ë§Œ í‘œí˜„ì´ ì„œíˆ´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', money: 'ê¾¸ì¤€íˆ ì €ì¶•í•˜ì—¬ í‹°ëŒ ëª¨ì•„ íƒœì‚°ìœ¼ë¡œ ë¶€ìê°€ ë©ë‹ˆë‹¤.', work: 'ë°˜ë³µì ì¸ ì¼ë„ ëˆê¸° ìˆê²Œ í•´ë‚´ì–´ ì‹ ë¢°ë¥¼ ì–»ìŠµë‹ˆë‹¤.' },
            'å¯…': { k: 'í™œë™ì ', d: 'ì¶”ì§„ë ¥ì´ ê°•í•˜ê³  ë¦¬ë”ì‹­ ìˆìŒ.', love: 'ì¢‹ì•„í•˜ë©´ ì•ë’¤ ì•ˆ ê°€ë¦¬ê³  ì§ì§„í•˜ëŠ” ë¶ˆë„ì € ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.', money: 'í° ëˆì„ ë²Œ ê¸°íšŒë¥¼ ì˜ í¬ì°©í•˜ì§€ë§Œ, ì”€ì”€ì´ë„ í½ë‹ˆë‹¤.', work: 'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë° íƒì›”í•œ ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.' },
            'å¯': { k: 'ì„¬ì„¸í•¨', d: 'ë‹¤ì •í•˜ê³  ì¸ì •ì´ ë§ìŒ.', love: 'ìƒëŒ€ë°©ì„ ì„¸ì‹¬í•˜ê²Œ ì±™ê²¨ì£¼ëŠ” ë¡œë§¨í‹°ì‹œìŠ¤íŠ¸ì…ë‹ˆë‹¤.', money: 'ì‹¤ì† ìˆê²Œ ëˆì„ ì˜ êµ´ë¦¬ë©°, ë‚­ë¹„ë¥¼ ì‹«ì–´í•©ë‹ˆë‹¤.', work: 'ë””í…Œì¼ì„ ìš”í•˜ëŠ” ì¼ì´ë‚˜ ì‚¬ëŒì„ ìƒëŒ€í•˜ëŠ” ì¼ì— ëŠ¥í•©ë‹ˆë‹¤.' },
            'è¾°': { k: 'ì´ìƒì ', d: 'í¬ë¶€ê°€ í¬ê³  ê¿ˆì„ ì«“ìŒ.', love: 'ì˜í™” ê°™ì€ ë¡œë§¨ìŠ¤ë¥¼ ê¿ˆê¾¸ë©°, ìƒëŒ€ë°©ì—ê²Œ ë©‹ì§„ ëª¨ìŠµì„ ë³´ì—¬ì£¼ë ¤ í•©ë‹ˆë‹¤.', money: 'ìŠ¤ì¼€ì¼ì´ í° íˆ¬ìë¥¼ ì¢‹ì•„í•˜ë©°, ëŒ€ë°•ì„ ë…¸ë¦½ë‹ˆë‹¤.', work: 'ë¦¬ë”ì‹­ì´ ìˆê³  ì¡°ì§ì„ ì´ë„ëŠ” í˜ì´ ìˆìŠµë‹ˆë‹¤.' },
            'å·³': { k: 'í˜„ì‹¤ì ', d: 'ê³„ì‚°ì´ ë¹ ë¥´ê³  ì‹¤ì†ì„ ì±™ê¹€.', love: 'ìƒëŒ€ì˜ ì¡°ê±´ê³¼ í˜„ì‹¤ì ì¸ ë©´ì„ ê¼¼ê¼¼íˆ ë”°ì ¸ë³´ê³  ë§Œë‚©ë‹ˆë‹¤.', money: 'ì •ë³´ ìˆ˜ì§‘ ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ ì¬í…Œí¬ì— ë°ìŠµë‹ˆë‹¤.', work: 'ì¼ì²˜ë¦¬ê°€ ë¹ ë¥´ê³  ì •í™•í•˜ë©°, í˜‘ìƒì— ëŠ¥í•©ë‹ˆë‹¤.' },
            'åˆ': { k: 'ì—´ì •ì ', d: 'í™”ë ¤í•˜ê³  ë‚˜ì„œê¸°ë¥¼ ì¢‹ì•„í•¨.', love: 'í™”ë ¤í•˜ê³  ì—´ì •ì ì¸ ì—°ì• ë¥¼ ì¦ê¸°ë©°, ì¸ê¸° ë§Œì ì…ë‹ˆë‹¤.', money: 'í¼ìƒí¼ì‚¬ë¼ ëˆì„ ì‹œì›í•˜ê²Œ ì“°ì§€ë§Œ, ë²„ëŠ” ëŠ¥ë ¥ë„ ì¢‹ìŠµë‹ˆë‹¤.', work: 'ì£¼ëª©ë°›ëŠ” ì¼ì„ ì¢‹ì•„í•˜ë©°, í™ë³´ë‚˜ ì˜ì—…ì—ì„œ ë¹›ì„ ë°œí•©ë‹ˆë‹¤.' },
            'æœª': { k: 'ì˜¨í™”í•¨', d: 'ì°¸ì„ì„±ì´ ë§ìœ¼ë‚˜ ê³ ì§‘ ìˆìŒ.', love: 'ë”°ëœ»í•˜ê²Œ ê°ì‹¸ì£¼ì§€ë§Œ, ì€ê·¼íˆ ê³ ì§‘ì´ ì„¸ì„œ êº¾ì§€ ì•ŠìŠµë‹ˆë‹¤.', money: 'ì•ˆì „í•œ ìì‚°ì„ ì„ í˜¸í•˜ë©°, í™•ì‹¤í•˜ì§€ ì•Šìœ¼ë©´ ì§€ê°‘ì„ ì—´ì§€ ì•ŠìŠµë‹ˆë‹¤.', work: 'ì‚¬ëŒë“¤ê³¼ì˜ ì¡°í™”ë¥¼ ì¤‘ì‹œí•˜ë©°, ì¤‘ì¬ì ì—­í• ì„ ì˜í•©ë‹ˆë‹¤.' },
            'ç”³': { k: 'ë‹¤ì¬ë‹¤ëŠ¥', d: 'ì„ê¸°ì‘ë³€ì´ ë›°ì–´ë‚˜ê³  ì¬ì£¼ê°€ ë§ìŒ.', love: 'ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê³  ì¬ì¹˜ ìˆì–´ ì´ì„±ì—ê²Œ ì¸ê¸°ê°€ ë§ìŠµë‹ˆë‹¤.', money: 'ë‹¤ì–‘í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ëˆì„ ë²Œë©°, ìˆ˜ë‹¨ì´ ì¢‹ìŠµë‹ˆë‹¤.', work: 'ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ ì–´ë–¤ ìƒí™©ì—ì„œë„ ì‚´ì•„ë‚¨ìŠµë‹ˆë‹¤.' },
            'é…‰': { k: 'ì˜ˆë¦¬í•¨', d: 'ì™„ë²½ì£¼ì˜ì ì´ê³  ê¹”ë”í•¨.', love: 'ëˆˆì´ ë†’ê³  ê¹Œë‹¤ë¡­ì§€ë§Œ, ë‚´ ì‚¬ëŒì—ê²ŒëŠ” ì™„ë²½í•˜ê²Œ ì˜í•´ì¤ë‹ˆë‹¤.', money: '10ì› í•œ ì¥ë„ í—ˆíˆ¬ë£¨ ì“°ì§€ ì•ŠëŠ” ê¼¼ê¼¼í•œ ê´€ë¦¬ìì…ë‹ˆë‹¤.', work: 'ì „ë¬¸ì„±ì´ í•„ìš”í•œ ì¼ì´ë‚˜ ë¶„ì„ì ì¸ ì—…ë¬´ì— ì í•©í•©ë‹ˆë‹¤.' },
            'æˆŒ': { k: 'ì¶©ì§í•¨', d: 'ì‹ ì˜ë¥¼ ì§€í‚¤ê³  ë°©ì–´ì ì„.', love: 'í•œ ì‚¬ëŒë§Œ ë°”ë¼ë³´ëŠ” í•´ë°”ë¼ê¸° ê°™ì€ ì—°ì• ë¥¼ í•©ë‹ˆë‹¤.', money: 'ì¬ë¬¼ì„ ì§€í‚¤ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•˜ì—¬ ëˆì´ ì˜ ìƒˆì§€ ì•ŠìŠµë‹ˆë‹¤.', work: 'ì±…ì„ê°ì´ ê°•í•˜ì—¬ ë§¡ì€ ì¼ì€ ë°˜ë“œì‹œ ì™„ìˆ˜í•©ë‹ˆë‹¤.' },
            'äº¥': { k: 'ì§€í˜œë¡œì›€', d: 'í¬ìš©ë ¥ì´ ë„“ê³  ìœ ì—°í•¨.', love: 'ëª¨ë“  ê²ƒì„ ì´í•´í•´ì£¼ê³  ë°›ì•„ì£¼ëŠ” ë°”ë‹¤ ê°™ì€ ë§ˆìŒì”¨ë¥¼ ê°€ì¡ŒìŠµë‹ˆë‹¤.', money: 'ë¨¹ì„ ë³µì´ ìˆì–´ ì‚´ë©´ì„œ ëˆ ê±±ì •ì€ í¬ê²Œ ì•ˆ í•©ë‹ˆë‹¤.', work: 'í†µì°°ë ¥ì´ ìˆì–´ í° íë¦„ì„ ì½ëŠ” ì¼ì— ëŠ¥í•©ë‹ˆë‹¤.' }
        };

        const SEASON_MODIFIERS = {
            'å¯…': 'ì´ˆë´„ì˜', 'å¯': 'ë´„ì˜', 'è¾°': 'ëŠ¦ë´„ì˜',
            'å·³': 'ì´ˆì—¬ë¦„ì˜', 'åˆ': 'ì—¬ë¦„ì˜', 'æœª': 'ëŠ¦ì—¬ë¦„ì˜',
            'ç”³': 'ì´ˆê°€ì„ì˜', 'é…‰': 'ê°€ì„ì˜', 'æˆŒ': 'ëŠ¦ê°€ì„ì˜',
            'äº¥': 'ì´ˆê²¨ìš¸ì˜', 'å­': 'ê²¨ìš¸ì˜', 'ä¸‘': 'ëŠ¦ê²¨ìš¸ì˜'
        };

        function getDetailedPersonality(stem, branch, monthBranch) {
            const base = P[stem] || P['ç”²'];
            const brMod = BRANCH_MODIFIERS[branch] || { k: '', d: '' };
            const season = SEASON_MODIFIERS[monthBranch] || 'ê³„ì ˆì˜';

            // Construct dynamic personality text
            return {
                summary: `${season} ${brMod.d}`,
                desc: `ë‹¹ì‹ ì€ <strong>${season} ì—ë„ˆì§€</strong>ë¥¼ íƒ€ê³ ë‚œ <strong>${stem}(${ELEMENT_NAMES[EM[stem]]})</strong>ì…ë‹ˆë‹¤.<br>
                       ${brMod.d} ì„±í–¥(${brMod.k})ì´ ë”í•´ì ¸, ${base.base.split('.')[0]} íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.`
            };
        }

        function updateQuest() {
            if (!curDm) return;
            // Calculate Ten Gods
            const now = new Date();
            let targetStem = '';
            let timeLabel = '';

            // Using Solar/Lunar library to get current stems
            // Note: In real app, consider strict lunar calendar logic. Here using simple conversion.
            const s = Solar.fromYmd(now.getFullYear(), now.getMonth() + 1, now.getDate());
            const l = s.getLunar();
            const bz = l.getEightChar();

            if (fType === 'today') {
                targetStem = bz.getDayGan().toString();
                timeLabel = "ì˜¤ëŠ˜ì˜ ìš´ì„¸";
            } else if (fType === 'week') {
                // Saju doesn't have 'week', using Month Stem (Wol-un) as proxy for short-term flow
                targetStem = bz.getMonthGan().toString();
                timeLabel = "ì´ë²ˆ ë‹¬(ì£¼ê°„) ìš´ì„¸";
            } else {
                targetStem = bz.getYearGan().toString();
                timeLabel = "ì˜¬í•´ì˜ ìš´ì„¸";
            }

            // Determine Relationship
            const uEl = STEM_EL[curDm]; // User Element
            const tEl = STEM_EL[targetStem]; // Target Element (Time)

            let relType = '';

            // Simplification: Standard 10 Gods Logic
            // 1. Compare Element (Same, Output, Wealth, Control, Input)
            // 2. Compare Polarity (Yin/Yang)

            if (uEl === tEl) relType = 'same';
            else if (GENERATING[uEl] === tEl) relType = 'output'; // I generate -> Output (Sik-Sang)
            else if (OVERCOMING[uEl] === tEl) relType = 'i_control'; // I overcome -> Wealth (Jae-Seong)
            else if (OVERCOMING[tEl] === uEl) relType = 'control_me'; // It overcomes me -> Officer (Gwan-Seong)
            else if (GENERATING[tEl] === uEl) relType = 'input'; // It generates me -> Resource (In-Seong)

            // Polarity Check
            const isYang = (s) => ['ç”²', 'ä¸™', 'æˆŠ', 'åºš', 'å£¬'].includes(s);
            const samePol = isYang(curDm) === isYang(targetStem);

            const godKey = REL_MAP[relType][samePol ? 0 : 1];
            const god = TEN_GODS[godKey];

            document.getElementById('questTxt').innerHTML = `
                <span style="font-size:0.9rem; color:var(--cyan); display:block; margin-bottom:4px;">[${timeLabel}: ${god.name}]</span>
                ${god.desc}<br>
                <span style="font-size:0.8rem; color:var(--txt2); margin-top:6px; display:block;">ğŸ”‘ í‚¤ì›Œë“œ: ${god.keywords.join(', ')}</span>
             `;
        }
        function analyze() { uName = document.getElementById('userName').value.trim() || 'ìµëª…'; let y, mo, d, h, mi; const tab = document.querySelector('.tab-row button.on').dataset.tab; if (tab === 'quick') { const v = document.getElementById('quickDate').value.trim(); if (!/^\d{8}$/.test(v)) { alert('8ìë¦¬ ìˆ«ìë¡œ ì…ë ¥!'); return } y = +v.slice(0, 4); mo = +v.slice(4, 6); d = +v.slice(6, 8) } else { y = +yS.value; mo = +mS.value; d = +dS.value } if (mo < 1 || mo > 12 || d < 1 || d > 31) { alert('ë‚ ì§œ í™•ì¸!'); return } if (document.getElementById('unknownTime').checked) { h = 12; mi = 0 } else { const ap = document.getElementById('selAmpm').value; let hh = +hS.value; mi = +minS.value; if (ap === 'PM' && hh !== 12) hh += 12; if (ap === 'AM' && hh === 12) hh = 0; h = hh } document.getElementById('inputSection').style.display = 'none'; document.getElementById('loading').style.display = 'flex'; setTimeout(() => { try { if (typeof Solar === 'undefined') throw new Error('Solar library not loaded'); calc(y, mo, d, h, mi) } catch (e) { console.error(e); alert('ì£„ì†¡í•©ë‹ˆë‹¤. ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\nì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'); location.reload() } finally { document.getElementById('loading').style.display = 'none' } }, 1500) }
        function calc(y, mo, d, h, mi) {
            const s = Solar.fromYmdHms(y, mo, d, h, mi, 0), l = s.getLunar(), bz = l.getEightChar();
            const yG = bz.getYearGan().toString(), yZ = bz.getYearZhi().toString();
            const mG = bz.getMonthGan().toString(), mZ = bz.getMonthZhi().toString();
            const dG = bz.getDayGan().toString(), dZ = bz.getDayZhi().toString();
            const tG = bz.getTimeGan().toString(), tZ = bz.getTimeZhi().toString();
            const p = [yG, yZ, mG, mZ, dG, dZ, tG, tZ];
            const cnt = { WOOD: 0, FIRE: 0, EARTH: 0, METAL: 0, WATER: 0 };
            p.forEach(c => { const e = EM[c]; if (e) cnt[e]++ });
            curDm = dG;
            const basePd = P[curDm] || P['ç”²'];
            const brMod = BRANCH_MODIFIERS[dZ] || { k: '', d: '', love: '', money: '', work: '' };
            // Merge Base + Modifier for Dynamic Tabs
            curPd = {
                base: basePd.base + "<br><br>ğŸ‘‰ <strong>ì§€ì§€ì˜ ì˜í–¥ (" + dZ + "):</strong> " + brMod.d,
                love: basePd.love + "<br><br>ğŸ’– <strong>ì—°ì•  ìŠ¤íƒ€ì¼:</strong> " + brMod.love,
                money: basePd.money + "<br><br>ğŸ’° <strong>ì¬ë¬¼ ìš´ìš©:</strong> " + brMod.money,
                work: basePd.work + "<br><br>ğŸ’¼ <strong>ì§ì—…/ì‚¬íšŒ:</strong> " + brMod.work,
                advice: basePd.advice,
                mbti: basePd.mbti
            };
            // ë§Œì„¸ë ¥ 4ê¸°ë‘¥ ë Œë”ë§
            const pillars = [
                { label: 'ì‹œì£¼', stem: tG, branch: tZ },
                { label: 'ì¼ì£¼', stem: dG, branch: dZ },
                { label: 'ì›”ì£¼', stem: mG, branch: mZ },
                { label: 'ë…„ì£¼', stem: yG, branch: yZ }
            ];
            let pillarsHTML = '';
            pillars.forEach(pil => {
                const sEl = EM[pil.stem] || 'EARTH', bEl = EM[pil.branch] || 'EARTH';
                const sC = ELEMENT_COLORS[sEl], bC = ELEMENT_COLORS[bEl];
                pillarsHTML += `<div class="pillar"><span class="pillar-label">${pil.label}</span><div class="stem" style="background:${sC.bg};color:${sC.t}">${pil.stem}</div><div class="branch" style="background:${bC.bg};color:${bC.t}">${pil.branch}</div></div>`;
            });
            document.getElementById('pillarsBox').innerHTML = pillarsHTML;
            document.getElementById('pillarsBox').innerHTML = pillarsHTML;

            // Generate Dynamic Message
            const detail = getDetailedPersonality(dG, dZ, mZ);
            document.getElementById('sajuMsg').innerHTML = `ë‹¹ì‹ ì˜ ì‚¬ì£¼ë¥¼ ë¶„ì„í•œ ê²°ê³¼, íƒ€ê³ ë‚œ ê¸°ì§ˆì€ <strong>${detail.summary} ${ELEMENT_NAMES[EM[dG]]}</strong>ì…ë‹ˆë‹¤.`;
            // Also update the main text box with richer description if needed, or keep the specific 'storyBox' updated
            // For now, let's update the 'storyBox' content dynamically too? 
            // Actually, let's inject the dynamic description into the intro message for maximum effect.
            document.getElementById('sajuMsg').innerHTML += `<br><span style="font-size:0.9rem; color:var(--txt2); font-weight:normal; display:block; margin-top:8px;">${detail.desc}</span>`;
            // ê¶í•©: ìƒìƒìƒê·¹
            const myEl = STEM_EL[curDm] || 'WOOD';
            const bestEl = GENERATING[myEl], worstEl = OVERCOMING[myEl];
            const bestStem = ELEMENT_STEM[bestEl], worstStem = ELEMENT_STEM[worstEl];
            const bestMbti = P[bestStem]?.mbti || 'ENTP', worstMbti = P[worstStem]?.mbti || 'ESTP';
            document.getElementById('bestMatch').innerHTML = `${bestStem} (${bestMbti}) - ${ELEMENT_NAMES[bestEl]}ì˜ ê¸°ìš´`;
            document.getElementById('worstMatch').innerHTML = `${worstStem} (${worstMbti}) - ${ELEMENT_NAMES[worstEl]}ì˜ ê¸°ìš´`;
            // ê¸°ì¡´ ê²°ê³¼ í‘œì‹œ
            let mn = 9, wk = 'WATER';
            for (const [k, v] of Object.entries(cnt)) if (v < mn) { mn = v; wk = k }
            document.getElementById('result').style.display = 'block';
            ['n0', 'n1', 'n2', 'n3'].forEach(id => document.getElementById(id).innerText = uName);
            document.getElementById('soulC').innerText = curDm;
            document.getElementById('soulT').innerText = curPd.mbti;
            // document.getElementById('mbtiBadge').innerText = curPd.mbti; // Removed: element does not exist
            document.getElementById('genderBadge').innerText = gender === 'M' ? 'ğŸ™‹â€â™‚ï¸ ë‚¨ì (ì–‘)' : 'ğŸ™‹â€â™€ï¸ ì—¬ì (ìŒ)';
            curTheme = 'base';
            document.querySelectorAll('.theme-tabs button').forEach((b, i) => b.classList.toggle('on', i === 0));
            updateTheme();
            const ch = document.getElementById('statChart'); ch.innerHTML = '';
            ['WOOD', 'FIRE', 'EARTH', 'METAL', 'WATER'].forEach(k => {
                const e = E[k], c = cnt[k], pc = (c / 8) * 100;
                ch.innerHTML += `<div class="stat-row"><img src="${e.img}" alt=""><div class="stat-track"><div class="stat-fill" style="background:${e.c}" data-w="${pc}%"></div></div><span class="stat-n">${c}</span></div>`;
            });
            setTimeout(() => document.querySelectorAll('.stat-fill').forEach(b => b.style.width = b.dataset.w), 100);
            const lk = LK[wk], le = E[wk];
            const genderTip = gender === 'M' ? 'í–‰ë™ë ¥ì„ ë†’ì—¬ë³´ì„¸ìš”' : 'ì§ê´€ì„ ë¯¿ì–´ë³´ì„¸ìš”';
            document.getElementById('luckBox').innerHTML = `<div class="luck-dot" style="background:${le.c};color:${le.c}"></div><div class="luck-info"><strong>${lk.c}</strong><span>${lk.i} | ${genderTip}</span></div>`;
            updateQuest(); // Initial update

            // Trigger Mini Popup after a delay
            setTimeout(() => {
                if (!userMbti && document.getElementById('result').style.display === 'block') {
                    const popup = document.getElementById('mbtiMiniPopup');
                    popup.classList.add('show');
                }
            }, 3500); // Show popup after 3.5s reading time

            // MBTI ë¹„êµ í‘œì‹œ (Logic Refined) : UI Simplified
            document.getElementById('sajuMbti').innerHTML = `${curDm}`;

            // Comparison Text Logic for Modal (Future use) & Soul Text
            if (userMbti) {
                let cTxt = "";
                if (curPd.mbti === userMbti) {
                    cTxt = "<br><span style='font-size:0.85rem; color:var(--cyan); font-weight:700'>ğŸ˜² ì†Œë¦„! ë³¸ìºë‘ ë¶€ìºê°€ ë˜‘ê°™ë„¤ìš”!</span><br><span style='font-size:0.75rem; color:var(--txt2)'>íƒ€ê³ ë‚œ ëŒ€ë¡œ ì˜ ì‚´ê³  ê³„ì‹œêµ°ìš”.</span>";
                } else {
                    const diffCount = (curPd.mbti[0] !== userMbti[0]) + (curPd.mbti[1] !== userMbti[1]) + (curPd.mbti[2] !== userMbti[2]) + (curPd.mbti[3] !== userMbti[3]);
                    if (diffCount >= 3) {
                        cTxt = `<br><span style='font-size:0.85rem; color:var(--pink); font-weight:700'>ğŸ˜± í—! íƒ€ê³ ë‚œ ê±°ë‘ ì™„ì „ ë”´íŒì¸ë°ìš”?</span><br><span style='font-size:0.75rem; color:var(--txt2)'>ì‚¬íšŒìƒí™œ í•˜ëŠë¼ ê³ ìƒì´ ë§ìœ¼ì‹œë„¤ìš”..</span>`;
                    } else {
                        cTxt = `<br><span style='font-size:0.85rem; color:var(--yellow); font-weight:700'>ğŸ¤” ìŒ.. í˜„ì‹¤ íƒ€í˜‘ ì¢€ í•˜ì…¨êµ°ìš”?</span><br><span style='font-size:0.75rem; color:var(--txt2)'>íƒ€ê³ ë‚œ ì„±í–¥(${curPd.mbti})ê³¼ ì¡°ê¸ˆ ë‹¤ë¥´ë„¤ìš”.</span>`;
                    }
                }
                document.getElementById('soulT').innerHTML = cTxt;

            } else {
                // Reset comparison text
                document.getElementById('soulT').innerHTML = "";
            }
        }

        // MBTI Test Logic
        const questions = [
            { t: "EI", q: "ì¹œêµ¬ê°€ ê°‘ìê¸° 'ì§€ê¸ˆ ë‚˜ì™€!'ë¼ê³  í•œë‹¤ë©´?", a: [{ t: "E", v: "ì˜¤ ê¿€ì¼ã…‹ ë°”ë¡œ ë‚˜ê°" }, { t: "I", v: "ì•„... ê¸° ë¹¨ë¦¬ëŠ”ë° í•‘ê³„ ëŒˆê¹Œ?" }] },
            { t: "EI", q: "íŒŒí‹°ì—ì„œ ëª¨ë¥´ëŠ” ì‚¬ëŒì´ ë§ì„ ê±¸ë©´?", a: [{ t: "E", v: "ì˜¤ ë°˜ê°€ì›Œìš”! (ë°”ë¡œ ì¸ìŠ¤íƒ€ ë§íŒ”)" }, { t: "I", v: "(ì–´ìƒ‰í•œ ë¯¸ì†Œ) ì•„ ì˜ˆ... (ë„ë§ê°ˆ ê° ì°ë‹¤)" }] },
            { t: "EI", q: "ì¼ì£¼ì¼ ë™ì•ˆ ì§‘ ë°–ì— ì•ˆ ë‚˜ê°€ê¸° ê°€ëŠ¥?", a: [{ t: "E", v: "ì ˆëŒ€ ë¶ˆê°€. ë²½ì´ë‘ ëŒ€í™”í•  ë“¯" }, { t: "I", v: "ì²œêµ­ ì•„ë‹˜? ë„·í”Œë¦­ìŠ¤ ì •ì£¼í–‰ ê°œê¿€" }] },

            { t: "SN", q: "ë© ë•Œë¦´ ë•Œ ë¬´ìŠ¨ ìƒê° í•´?", a: [{ t: "S", v: "ë°°ê³ í”„ë‹¤, ì €ë… ë­ ë¨¹ì§€" }, { t: "N", v: "ì¢€ë¹„ê°€ ë‚˜íƒ€ë‚˜ë©´ ì–´ë””ë¡œ íŠ€ì§€?" }] },
            { t: "SN", q: "ì—¬í–‰ ê°ˆ ë•Œ ê³„íšì€?", a: [{ t: "S", v: "ë§›ì§‘ ë¦¬ìŠ¤íŠ¸, ë™ì„  ì²´í¬ ì™„ë²½" }, { t: "N", v: "ì¼ë‹¨ ê°€ì„œ ëŠë‚Œ ì˜¤ëŠ” ëŒ€ë¡œ~" }] }, // This is actually J/P usually but fitting S/N context of concrete vs abstract
            { t: "SN", q: "ì˜í™”ë¥¼ ë³¼ ë•Œ ë” ì¤‘ìš”í•œ ê±´?", a: [{ t: "S", v: "ë°°ìš° ì—°ê¸°, ì˜ìƒë¯¸, í˜„ì‹¤ ê³ ì¦" }, { t: "N", v: "ìˆ¨ê²¨ì§„ ì˜ë¯¸, ê°ë…ì˜ ë©”ì‹œì§€, ì„¸ê³„ê´€" }] },

            { t: "TF", q: "ì¹œêµ¬ê°€ ì°¨ ì‚¬ê³  ë‚¬ë‹¤ê³  ì „í™”í•˜ë©´?", a: [{ t: "T", v: "ë³´í—˜ ë¶ˆë €ì–´? ë‹¤ì¹œ ë´ ì—†ê³ ?" }, { t: "F", v: "í— ê´œì°®ì•„??! ë§ì´ ë†€ëì§€ ã… ã… " }] },
            { t: "TF", q: "ì¹œêµ¬ê°€ 'ë‚˜ ìš°ìš¸í•´ì„œ ë¨¸ë¦¬ ì˜ëì–´'ë¼ê³  í•˜ë©´?", a: [{ t: "T", v: "ì–¼ë§ˆ ì¤¬ì–´? ì˜ ì–´ìš¸ë¦¬ë„¤" }, { t: "F", v: "ë¬´ìŠ¨ ì¼ ìˆì—ˆì–´? ì™œ ìš°ìš¸í•´ ã… ã… " }] },
            { t: "TF", q: "íšŒì˜ ì¤‘ ë‚´ ì˜ê²¬ì´ ë°˜ë°•ë‹¹í•˜ë©´?", a: [{ t: "T", v: "ì•„ ê·¸ëŸ°ê°€? ë…¼ë¦¬ì ìœ¼ë¡œ ë§ë„¤ (ìˆ˜ê¸)" }, { t: "F", v: "ì•„... (ë§ˆìƒ ì…ìŒ, ì§‘ ê°€ì„œ ì´ë¶ˆí‚¥)" }] },

            { t: "JP", q: "2ì£¼ ë’¤ ì—¬í–‰, ì§€ê¸ˆ ë‚´ ìƒíƒœëŠ”?", a: [{ t: "J", v: "ìˆ™ì†Œ ì˜ˆì•½ ì™„ë£Œ, ì—‘ì…€ë¡œ ì¼ì • ì •ë¦¬ ì¤‘" }, { t: "P", v: "ë¹„í–‰ê¸° í‘œëŠ” ëŠì—ˆë‚˜? ì•„ ëª°ë¼ ê·¸ë•Œ ê°€ì„œ" }] },
            { t: "JP", q: "ì±…ìƒ ìœ„ ìƒíƒœëŠ”?", a: [{ t: "J", v: "ê° ì¡í˜€ ìˆìŒ. ë¬¼ê±´ ì œìë¦¬" }, { t: "P", v: "ì¹´ì˜¤ìŠ¤ ê·¸ ìì²´. ê·¼ë° ì–´ë”” ë­ ìˆëŠ”ì§„ ì•" }] },
            { t: "JP", q: "ì•½ì† ì‹œê°„ 1ì‹œê°„ ì „, ì¹œêµ¬ê°€ '30ë¶„ ëŠ¦ì„ ë“¯'ì´ë¼ í•œë‹¤ë©´?", a: [{ t: "J", v: "ì•„... ë‚´ ê³„íš ë‹¤ ê¼¬ì´ëŠ”ë° (ì§œì¦)" }, { t: "P", v: "ì˜¤ ê°œê¿€ã…‹ ë‚˜ë„ ì²œì²œíˆ ê°€ì•¼ì§€" }] }
        ];

        let qIdx = 0;
        let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

        const MBTI_DESC = {
            'ISTJ': "í˜„ì‹¤ì£¼ì˜ì ê·¸ ìì²´. ì•½ì† ì‹œê°„ 1ë¶„ ëŠ¦ìœ¼ë©´ ì†ì ˆê°. ê²‰ìœ¼ë¡  ê¼°ëŒ€ ê°™ì•„ ë³´ì´ì§€ë§Œ ì±…ì„ê° í•˜ë‚˜ëŠ” ìš°ì£¼ ìµœê°•. ê³„íš í‹€ì–´ì§€ë©´ ê³ ì¥ë‚¨.",
            'ISFJ': "ì°©í•œ ì²™í•˜ëŠ”ë° ì†ìœ¼ë¡œ ìš•í•˜ê³  ìˆìŒ. ë‚¨ ì±™ê²¨ì£¼ëŠ” ì²™í•˜ë©´ì„œ ë‚´ ì‚¬ëŒ ì±™ê¹€. ë’¤ë ì©”ì–´ì„œ 3ë…„ ì „ ì¼ë„ ê¸°ì–µí•¨.",
            'INFJ': "ê²‰ìœ¼ë¡  ì›ƒëŠ”ë° ì†ìœ¼ë¡  ì¸ë¥˜ ë©¸ë§ ì‹œë‚˜ë¦¬ì˜¤ ì”€. ë‚¨ ëˆˆì¹˜ ë³´ëŠë¼ í”¼ê³¤í•¨. ë„ë•ì ì¸ ì²™í•˜ì§€ë§Œ ì†ìœ¼ë¡  ì œì¼ ìŒí‰í•  ìˆ˜ë„.",
            'INTJ': "ì¸ê°„ í˜ì˜¤ì. ë©ì²­í•œ ì‚¬ëŒ ë³´ë©´ í™”ë‚¨. í˜¼ì ìˆëŠ” ê²Œ ì œì¼ ì¢‹ìŒ. ê³„íší•œ ëŒ€ë¡œ ì•ˆ ë˜ë©´ ì„¸ìƒ ë¬´ë„ˆì§.",
            'ISTP': "ë§Œì‚¬ê°€ ê·€ì°®ìŒ. íš¨ìœ¨ì¶©. ë‚¨í•œí…Œ ê´€ì‹¬ ì—†ìŒ. ì˜í˜¼ ì—†ë‹¤ëŠ” ì†Œë¦¬ ìì£¼ ë“¤ìŒ. ê·¼ë° ë­ í•˜ë‚˜ ê½‚íˆë©´ ë¬´ì„œì›€.",
            'ISFP': "ì¹¨ëŒ€ ì„±ì• ì. ì•½ì† ì·¨ì†Œë˜ë©´ ê¸°ë»í•¨. ì°©í•œë° ìš°ìœ ë¶€ë‹¨í•¨. ê±°ì ˆ ëª»í•´ì„œ í˜¸êµ¬ ì¡í˜. ê°¬ì„± ì¶©ë§Œ.",
            'INFP': "ë§ìƒ ì „ë¬¸ê°€. ìœ ë¦¬ ë©˜íƒˆ. í˜¼ì ìˆëŠ” ê±° ì¢‹ì€ë° ì™¸ë¡œìš´ ê±´ ì‹«ìŒ. ì°©í•œë° ê°€ë” í‘í™”í•˜ë©´ ë¬´ì„œì›€.",
            'INTP': "ë…¼ë¦¬ì™•. ë§ì‹¸ì›€í•˜ë©´ ì ˆëŒ€ ì•ˆ ì§. ê³µê° ëŠ¥ë ¥ ì œë¡œ. íŒ©í­ í•˜ë‹¤ê°€ ì¹œêµ¬ ë‹¤ ë– ë‚˜ê°. ë°©êµ¬ì„ ì•„ì¸ìŠˆíƒ€ì¸.",
            'ESTP': "ìŠ¤ë¦´ ì¤‘ë…ì. ë‚´ì¼ì€ ì—†ë‹¤. ì¼ë‹¨ ì €ì§€ë¥´ê³  ë´„. ë§ì´ í–‰ë™ë³´ë‹¤ ë¹ ë¦„. íŒ©í­ëŸ¬. ë‚¨ ëˆˆì¹˜ ì•ˆ ë´„.",
            'ESFP': "ê´€ì¢… ê·¸ ìì²´. ì‚¬ëŒ ë§Œë‚˜ëŠ” ê²Œ ì—ë„ˆì§€ ì¶©ì „. ë¶„ìœ„ê¸° ë©”ì´ì»¤. ì§„ì§€í•œ ê±° ë”± ì§ˆìƒ‰. ì¹´ë“œê°’ í­íƒ„ ì£¼ì˜.",
            'ENFP': "ëŒ•ëŒ•ì´ ì¸ê°„í˜•. ë¦¬ì•¡ì…˜ í˜œì. ê¸ˆì‚¬ë¹ . ê°ì • ê¸°ë³µ ë¡¤ëŸ¬ì½”ìŠ¤í„°. ë¨¸ë¦¿ì†ì— ê½ƒë°­ ìˆìŒ. ë’·ë§ˆë¬´ë¦¬ ì•ˆ ë¨.",
            'ENTP': "ë…¼ìŸ ì¦ê¸°ëŠ” ë³€íƒœ. ë‚¨ ê³¨íƒ• ë¨¹ì´ëŠ” ê±° ì¢‹ì•„í•¨. ì•„ì´ë””ì–´ ë±…í¬. ê³ ì§‘ ì…ˆ. ìê¸°ì•  í­ë°œ.",
            'ESTJ': "ì Šì€ ê¼°ëŒ€. ì¼ ì¤‘ë…ì. ê°ì •íŒ”ì´ ê·¹í˜. ë¦¬ë” í•˜ê³  ì‹¶ì–´ í•¨. ì”ì†Œë¦¬ ëŒ€ë§ˆì™•. ìœµí†µì„± ì œë¡œ.",
            'ESFJ': "ì˜¤ì§€ë– ëŒ€ë§ˆì™•. ë‚¨ ì±™ê¸°ëŠ” ê²Œ ë‚™. ì¹­ì°¬ ì•ˆ í•´ì£¼ë©´ ì‚ì§. ë’·ë‹´í™” ì¢‹ì•„í•¨. ë¶„ìœ„ê¸° ëª» ë§ì¶”ë©´ ëª» ì°¸ìŒ.",
            'ENFJ': "í‰í™”ì£¼ì˜ì. ë‚¨ë“¤ ì‹¸ìš°ë©´ ë§ë ¤ì•¼ í•¨. ì˜¤ê¸€ê±°ë¦¬ëŠ” ë©˜íŠ¸ ì¥ì¸. ë©˜íƒˆ ì•½í•¨. ë‚¨ ë•ë‹¤ê°€ ë‚´ ì½”ê°€ ì„ì.",
            'ENTJ': "ë…ì¬ì ê¸°ì§ˆ. ì¼ ëª»í•˜ëŠ” ì‚¬ëŒ ê·¹í˜. ëª©í‘œ ë‹¬ì„± ìœ„í•´ì„  ìˆ˜ë‹¨ ë°©ë²• ì•ˆ ê°€ë¦¼. ì›Œì»¤í™€ë¦­. ê³µê° ëŠ¥ë ¥ ë¶€ì¡±."
        };

        function startMbtiTest() {
            // ì •ë³´ ì…ë ¥ í™•ì¸ Logic ì¶”ê°€
            const name = document.getElementById('userName').value.trim();
            if (!name) {
                alert('ì´ë¦„ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ˜…');
                document.getElementById('userName').focus();
                return;
            }

            const tab = document.querySelector('.tab-row button.on').dataset.tab;
            let isValidDate = false;

            if (tab === 'quick') {
                const v = document.getElementById('quickDate').value.trim();
                if (/^\d{8}$/.test(v)) {
                    isValidDate = true;
                }
            } else {
                // Detail tab validation generally assumed valid via selects, but good to check context
                isValidDate = true;
            }

            if (!isValidDate) {
                alert('ìƒë…„ì›”ì¼ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ“…');
                if (tab === 'quick') document.getElementById('quickDate').focus();
                return;
            }

            // ëª¨ë“  ì •ë³´ê°€ ìˆìœ¼ë©´ í…ŒìŠ¤íŠ¸ ì‹œì‘
            document.getElementById('mbtiModal').style.display = 'flex';
            qIdx = 0;
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            showQuestion();
        }

        function closeMbtiTest() {
            if (confirm('í…ŒìŠ¤íŠ¸ë¥¼ ê·¸ë§Œë‘ì‹œê² ìŠµë‹ˆê¹Œ? ê¸°ë¡ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
                document.getElementById('mbtiModal').style.display = 'none';
            }
        }

        function showQuestion() {
            const q = questions[qIdx];
            const qBox = document.getElementById('qBox');
            document.getElementById('qNum').innerText = `${qIdx + 1} / ${questions.length}`;
            document.getElementById('mbtiBar').style.width = `${((qIdx + 1) / questions.length) * 100}%`;

            qBox.innerHTML = `
                <div class="q-card">
                    <p class="q-text">${q.q}</p>
                    <button class="opt-btn" onclick="answer('${q.a[0].t}')">A. ${q.a[0].v}</button>
                    <button class="opt-btn" onclick="answer('${q.a[1].t}')">B. ${q.a[1].v}</button>
                </div>
            `;
        }

        function answer(type) {
            scores[type]++;
            qIdx++;
            if (qIdx < questions.length) {
                showQuestion();
            } else {
                finishTest();
            }
        }

        function finishTest() {
            const r =
                (scores.E >= scores.I ? 'E' : 'I') +
                (scores.S >= scores.N ? 'S' : 'N') +
                (scores.T >= scores.F ? 'T' : 'F') +
                (scores.J >= scores.P ? 'J' : 'P');
            userMbti = r;
            document.getElementById('mbtiModal').style.display = 'none';

            // Show Result Modal
            const desc = MBTI_DESC[r] || "ì•Œ ìˆ˜ ì—†ëŠ” ìœ í˜•";
            let compMsg = "";

            if (curPd) {
                const sajuM = curPd.mbti;
                if (sajuM) {
                    if (sajuM === r) {
                        compMsg = `ğŸ˜² <strong>ì†Œë¦„!</strong> íƒ€ê³ ë‚œ ìš´ëª…(${sajuM})ê³¼ í˜„ì¬ ì„±ê²©ì´ ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•©ë‹ˆë‹¤! ë³¸ìºì™€ ë¶€ìºê°€ í•˜ë‚˜ì‹œë„¤ìš”.`;
                    } else {
                        compMsg = `ğŸ¤” íƒ€ê³ ë‚œ ìš´ëª…ì€ <strong>${sajuM}</strong>ì¸ë°, ì‹¤ì œë¡œëŠ” <strong>${r}</strong>ë¡œ ì‚´ê³  ê³„ì‹œë„¤ìš”! ì‚¬íšŒìƒí™œ í•˜ëŠë¼ ì„±ê²©ì´ ì¢€ ë°”ë€Œì…¨ë‚˜ìš”?`;
                    }
                }
            } else {
                compMsg = "ì‚¬ì£¼ ê²°ê³¼ë¥¼ ë¨¼ì € ë³´ë©´ ë¹„êµ ë¶„ì„ë„ í•´ë“œë ¤ìš”!";
            }

            document.getElementById('resMbtiTitle').innerText = r;
            document.getElementById('resMbtiDesc').innerText = desc;
            document.getElementById('resCompareTxt').innerHTML = compMsg;
            document.getElementById('mbtiResultModal').style.display = 'flex';

            // Update Main Result View if visible
            if (document.getElementById('result').style.display === 'block') {
                analyze();
            }
        }

        function closeMbtiResult() {
            document.getElementById('mbtiResultModal').style.display = 'none';
        }
        function shareKakao() { if (typeof Kakao === 'undefined' || !Kakao.isInitialized()) { alert('ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” í•„ìš”'); return } Kakao.Share.sendDefault({ objectType: 'feed', content: { title: `${uName}ë‹˜ì˜ ì˜í˜¼ ìºë¦­í„°ëŠ” [${curDm}]!`, description: curPd ? curPd.mbti + ' - ' + curPd.base.slice(0, 40) + '...' : 'ì‚¬ì£¼ ë¶„ì„ í•´ë³´ì„¸ìš”!', imageUrl: 'https://choiseokhee4u-svg.github.io/Saju_TheMoon/images/Fire.png', link: { mobileWebUrl: 'https://choiseokhee4u-svg.github.io/Saju_TheMoon/', webUrl: 'https://choiseokhee4u-svg.github.io/Saju_TheMoon/' } }, buttons: [{ title: 'ë‚´ ìš´ëª… í™•ì¸í•˜ê¸°', link: { mobileWebUrl: 'https://choiseokhee4u-svg.github.io/Saju_TheMoon/', webUrl: 'https://choiseokhee4u-svg.github.io/Saju_TheMoon/' } }] }) }
    </script>
</body>

</html>